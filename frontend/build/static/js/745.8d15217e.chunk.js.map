{"version":3,"file":"static/js/745.8d15217e.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/ArrowBack.js","../node_modules/@mui/icons-material/esm/AttachFile.js","../node_modules/@mui/icons-material/esm/Close.js","../node_modules/@mui/icons-material/esm/Send.js","../node_modules/@mui/icons-material/esm/SettingsVoice.js","../node_modules/@mui/material/IconButton/iconButtonClasses.js","../node_modules/@mui/material/IconButton/IconButton.js","../node_modules/react-query/es/core/subscribable.js","../node_modules/react-query/es/core/focusManager.js","../node_modules/react-query/es/core/onlineManager.js","../node_modules/react-query/es/core/retryer.js","../node_modules/react-query/es/core/query.js","../node_modules/react-query/es/core/queryCache.js","../node_modules/react-query/es/core/mutation.js","../node_modules/react-query/es/core/mutationCache.js","../node_modules/react-query/es/core/infiniteQueryBehavior.js","../node_modules/react-query/es/core/queryClient.js","../node_modules/react-query/es/core/logger.js","../node_modules/react-query/es/core/notifyManager.js","../node_modules/react-query/es/core/utils.js","../node_modules/react-query/es/react/reactBatchedUpdates.js","../node_modules/react-query/es/react/setBatchUpdatesFn.js","../node_modules/react-query/es/react/logger.js","../node_modules/react-query/es/react/setLogger.js","../node_modules/@tanstack/query-core/src/mutationObserver.ts","../node_modules/@tanstack/react-query/src/utils.ts","../node_modules/@tanstack/react-query/src/useMutation.ts","../../node_modules/emoji-picker-element/database.js","../../node_modules/emoji-picker-element/picker.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z\"\n}), 'ArrowBack');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6z\"\n}), 'AttachFile');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7 24h2v-2H7zm5-11c1.66 0 2.99-1.34 2.99-3L15 4c0-1.66-1.34-3-3-3S9 2.34 9 4v6c0 1.66 1.34 3 3 3m-1 11h2v-2h-2zm4 0h2v-2h-2zm4-14h-1.7c0 3-2.54 5.1-5.3 5.1S6.7 13 6.7 10H5c0 3.41 2.72 6.23 6 6.72V20h2v-3.28c3.28-.49 6-3.31 6-6.72\"\n}), 'SettingsVoice');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getIconButtonUtilityClass(slot) {\n  return generateUtilityClass('MuiIconButton', slot);\n}\nconst iconButtonClasses = generateUtilityClasses('MuiIconButton', ['root', 'disabled', 'colorInherit', 'colorPrimary', 'colorSecondary', 'colorError', 'colorInfo', 'colorSuccess', 'colorWarning', 'edgeStart', 'edgeEnd', 'sizeSmall', 'sizeMedium', 'sizeLarge']);\nexport default iconButtonClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport chainPropTypes from '@mui/utils/chainPropTypes';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { alpha } from '@mui/system/colorManipulator';\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport ButtonBase from \"../ButtonBase/index.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport iconButtonClasses, { getIconButtonUtilityClass } from \"./iconButtonClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disabled,\n    color,\n    edge,\n    size\n  } = ownerState;\n  const slots = {\n    root: ['root', disabled && 'disabled', color !== 'default' && `color${capitalize(color)}`, edge && `edge${capitalize(edge)}`, `size${capitalize(size)}`]\n  };\n  return composeClasses(slots, getIconButtonUtilityClass, classes);\n};\nconst IconButtonRoot = styled(ButtonBase, {\n  name: 'MuiIconButton',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.color !== 'default' && styles[`color${capitalize(ownerState.color)}`], ownerState.edge && styles[`edge${capitalize(ownerState.edge)}`], styles[`size${capitalize(ownerState.size)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  textAlign: 'center',\n  flex: '0 0 auto',\n  fontSize: theme.typography.pxToRem(24),\n  padding: 8,\n  borderRadius: '50%',\n  color: (theme.vars || theme).palette.action.active,\n  transition: theme.transitions.create('background-color', {\n    duration: theme.transitions.duration.shortest\n  }),\n  variants: [{\n    props: props => !props.disableRipple,\n    style: {\n      '--IconButton-hoverBg': theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      '&:hover': {\n        backgroundColor: 'var(--IconButton-hoverBg)',\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  }, {\n    props: {\n      edge: 'start'\n    },\n    style: {\n      marginLeft: -12\n    }\n  }, {\n    props: {\n      edge: 'start',\n      size: 'small'\n    },\n    style: {\n      marginLeft: -3\n    }\n  }, {\n    props: {\n      edge: 'end'\n    },\n    style: {\n      marginRight: -12\n    }\n  }, {\n    props: {\n      edge: 'end',\n      size: 'small'\n    },\n    style: {\n      marginRight: -3\n    }\n  }]\n})), memoTheme(({\n  theme\n}) => ({\n  variants: [{\n    props: {\n      color: 'inherit'\n    },\n    style: {\n      color: 'inherit'\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()) // check all the used fields in the style below\n  .map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      color: (theme.vars || theme).palette[color].main\n    }\n  })), ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()) // check all the used fields in the style below\n  .map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      '--IconButton-hoverBg': theme.vars ? `rgba(${(theme.vars || theme).palette[color].mainChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha((theme.vars || theme).palette[color].main, theme.palette.action.hoverOpacity)\n    }\n  })), {\n    props: {\n      size: 'small'\n    },\n    style: {\n      padding: 5,\n      fontSize: theme.typography.pxToRem(18)\n    }\n  }, {\n    props: {\n      size: 'large'\n    },\n    style: {\n      padding: 12,\n      fontSize: theme.typography.pxToRem(28)\n    }\n  }],\n  [`&.${iconButtonClasses.disabled}`]: {\n    backgroundColor: 'transparent',\n    color: (theme.vars || theme).palette.action.disabled\n  }\n})));\n\n/**\n * Refer to the [Icons](/material-ui/icons/) section of the documentation\n * regarding the available icon options.\n */\nconst IconButton = /*#__PURE__*/React.forwardRef(function IconButton(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiIconButton'\n  });\n  const {\n    edge = false,\n    children,\n    className,\n    color = 'default',\n    disabled = false,\n    disableFocusRipple = false,\n    size = 'medium',\n    ...other\n  } = props;\n  const ownerState = {\n    ...props,\n    edge,\n    color,\n    disabled,\n    disableFocusRipple,\n    size\n  };\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(IconButtonRoot, {\n    className: clsx(classes.root, className),\n    centerRipple: true,\n    focusRipple: !disableFocusRipple,\n    disabled: disabled,\n    ref: ref,\n    ...other,\n    ownerState: ownerState,\n    children: children\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? IconButton.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * The icon to display.\n   */\n  children: chainPropTypes(PropTypes.node, props => {\n    const found = React.Children.toArray(props.children).some(child => /*#__PURE__*/React.isValidElement(child) && child.props.onClick);\n    if (found) {\n      return new Error(['MUI: You are providing an onClick event listener to a child of a button element.', 'Prefer applying it to the IconButton directly.', 'This guarantees that the whole <button> will be responsive to click events.'].join('\\n'));\n    }\n    return null;\n  }),\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'default'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['inherit', 'default', 'primary', 'secondary', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, the  keyboard focus ripple is disabled.\n   * @default false\n   */\n  disableFocusRipple: PropTypes.bool,\n  /**\n   * If `true`, the ripple effect is disabled.\n   *\n   *  Without a ripple there is no styling for :focus-visible by default. Be sure\n   * to highlight the element by applying separate styles with the `.Mui-focusVisible` class.\n   * @default false\n   */\n  disableRipple: PropTypes.bool,\n  /**\n   * If given, uses a negative margin to counteract the padding on one\n   * side (this is often helpful for aligning the left or right\n   * side of the icon with content above or below, without ruining the border\n   * size and shape).\n   * @default false\n   */\n  edge: PropTypes.oneOf(['end', 'start', false]),\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense button styling.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['small', 'medium', 'large']), PropTypes.string]),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default IconButton;","export var Subscribable = /*#__PURE__*/function () {\n  function Subscribable() {\n    this.listeners = [];\n  }\n\n  var _proto = Subscribable.prototype;\n\n  _proto.subscribe = function subscribe(listener) {\n    var _this = this;\n\n    var callback = listener || function () {\n      return undefined;\n    };\n\n    this.listeners.push(callback);\n    this.onSubscribe();\n    return function () {\n      _this.listeners = _this.listeners.filter(function (x) {\n        return x !== callback;\n      });\n\n      _this.onUnsubscribe();\n    };\n  };\n\n  _proto.hasListeners = function hasListeners() {\n    return this.listeners.length > 0;\n  };\n\n  _proto.onSubscribe = function onSubscribe() {// Do nothing\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {// Do nothing\n  };\n\n  return Subscribable;\n}();","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { Subscribable } from './subscribable';\nimport { isServer } from './utils';\nexport var FocusManager = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(FocusManager, _Subscribable);\n\n  function FocusManager() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n\n    _this.setup = function (onFocus) {\n      var _window;\n\n      if (!isServer && ((_window = window) == null ? void 0 : _window.addEventListener)) {\n        var listener = function listener() {\n          return onFocus();\n        }; // Listen to visibillitychange and focus\n\n\n        window.addEventListener('visibilitychange', listener, false);\n        window.addEventListener('focus', listener, false);\n        return function () {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', listener);\n          window.removeEventListener('focus', listener);\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = FocusManager.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    if (!this.cleanup) {\n      this.setEventListener(this.setup);\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.hasListeners()) {\n      var _this$cleanup;\n\n      (_this$cleanup = this.cleanup) == null ? void 0 : _this$cleanup.call(this);\n      this.cleanup = undefined;\n    }\n  };\n\n  _proto.setEventListener = function setEventListener(setup) {\n    var _this$cleanup2,\n        _this2 = this;\n\n    this.setup = setup;\n    (_this$cleanup2 = this.cleanup) == null ? void 0 : _this$cleanup2.call(this);\n    this.cleanup = setup(function (focused) {\n      if (typeof focused === 'boolean') {\n        _this2.setFocused(focused);\n      } else {\n        _this2.onFocus();\n      }\n    });\n  };\n\n  _proto.setFocused = function setFocused(focused) {\n    this.focused = focused;\n\n    if (focused) {\n      this.onFocus();\n    }\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.listeners.forEach(function (listener) {\n      listener();\n    });\n  };\n\n  _proto.isFocused = function isFocused() {\n    if (typeof this.focused === 'boolean') {\n      return this.focused;\n    } // document global can be unavailable in react native\n\n\n    if (typeof document === 'undefined') {\n      return true;\n    }\n\n    return [undefined, 'visible', 'prerender'].includes(document.visibilityState);\n  };\n\n  return FocusManager;\n}(Subscribable);\nexport var focusManager = new FocusManager();","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { Subscribable } from './subscribable';\nimport { isServer } from './utils';\nexport var OnlineManager = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(OnlineManager, _Subscribable);\n\n  function OnlineManager() {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n\n    _this.setup = function (onOnline) {\n      var _window;\n\n      if (!isServer && ((_window = window) == null ? void 0 : _window.addEventListener)) {\n        var listener = function listener() {\n          return onOnline();\n        }; // Listen to online\n\n\n        window.addEventListener('online', listener, false);\n        window.addEventListener('offline', listener, false);\n        return function () {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', listener);\n          window.removeEventListener('offline', listener);\n        };\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = OnlineManager.prototype;\n\n  _proto.onSubscribe = function onSubscribe() {\n    if (!this.cleanup) {\n      this.setEventListener(this.setup);\n    }\n  };\n\n  _proto.onUnsubscribe = function onUnsubscribe() {\n    if (!this.hasListeners()) {\n      var _this$cleanup;\n\n      (_this$cleanup = this.cleanup) == null ? void 0 : _this$cleanup.call(this);\n      this.cleanup = undefined;\n    }\n  };\n\n  _proto.setEventListener = function setEventListener(setup) {\n    var _this$cleanup2,\n        _this2 = this;\n\n    this.setup = setup;\n    (_this$cleanup2 = this.cleanup) == null ? void 0 : _this$cleanup2.call(this);\n    this.cleanup = setup(function (online) {\n      if (typeof online === 'boolean') {\n        _this2.setOnline(online);\n      } else {\n        _this2.onOnline();\n      }\n    });\n  };\n\n  _proto.setOnline = function setOnline(online) {\n    this.online = online;\n\n    if (online) {\n      this.onOnline();\n    }\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.listeners.forEach(function (listener) {\n      listener();\n    });\n  };\n\n  _proto.isOnline = function isOnline() {\n    if (typeof this.online === 'boolean') {\n      return this.online;\n    }\n\n    if (typeof navigator === 'undefined' || typeof navigator.onLine === 'undefined') {\n      return true;\n    }\n\n    return navigator.onLine;\n  };\n\n  return OnlineManager;\n}(Subscribable);\nexport var onlineManager = new OnlineManager();","import { focusManager } from './focusManager';\nimport { onlineManager } from './onlineManager';\nimport { sleep } from './utils';\n\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1000 * Math.pow(2, failureCount), 30000);\n}\n\nexport function isCancelable(value) {\n  return typeof (value == null ? void 0 : value.cancel) === 'function';\n}\nexport var CancelledError = function CancelledError(options) {\n  this.revert = options == null ? void 0 : options.revert;\n  this.silent = options == null ? void 0 : options.silent;\n};\nexport function isCancelledError(value) {\n  return value instanceof CancelledError;\n} // CLASS\n\nexport var Retryer = function Retryer(config) {\n  var _this = this;\n\n  var cancelRetry = false;\n  var cancelFn;\n  var continueFn;\n  var promiseResolve;\n  var promiseReject;\n  this.abort = config.abort;\n\n  this.cancel = function (cancelOptions) {\n    return cancelFn == null ? void 0 : cancelFn(cancelOptions);\n  };\n\n  this.cancelRetry = function () {\n    cancelRetry = true;\n  };\n\n  this.continueRetry = function () {\n    cancelRetry = false;\n  };\n\n  this.continue = function () {\n    return continueFn == null ? void 0 : continueFn();\n  };\n\n  this.failureCount = 0;\n  this.isPaused = false;\n  this.isResolved = false;\n  this.isTransportCancelable = false;\n  this.promise = new Promise(function (outerResolve, outerReject) {\n    promiseResolve = outerResolve;\n    promiseReject = outerReject;\n  });\n\n  var resolve = function resolve(value) {\n    if (!_this.isResolved) {\n      _this.isResolved = true;\n      config.onSuccess == null ? void 0 : config.onSuccess(value);\n      continueFn == null ? void 0 : continueFn();\n      promiseResolve(value);\n    }\n  };\n\n  var reject = function reject(value) {\n    if (!_this.isResolved) {\n      _this.isResolved = true;\n      config.onError == null ? void 0 : config.onError(value);\n      continueFn == null ? void 0 : continueFn();\n      promiseReject(value);\n    }\n  };\n\n  var pause = function pause() {\n    return new Promise(function (continueResolve) {\n      continueFn = continueResolve;\n      _this.isPaused = true;\n      config.onPause == null ? void 0 : config.onPause();\n    }).then(function () {\n      continueFn = undefined;\n      _this.isPaused = false;\n      config.onContinue == null ? void 0 : config.onContinue();\n    });\n  }; // Create loop function\n\n\n  var run = function run() {\n    // Do nothing if already resolved\n    if (_this.isResolved) {\n      return;\n    }\n\n    var promiseOrValue; // Execute query\n\n    try {\n      promiseOrValue = config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    } // Create callback to cancel this fetch\n\n\n    cancelFn = function cancelFn(cancelOptions) {\n      if (!_this.isResolved) {\n        reject(new CancelledError(cancelOptions));\n        _this.abort == null ? void 0 : _this.abort(); // Cancel transport if supported\n\n        if (isCancelable(promiseOrValue)) {\n          try {\n            promiseOrValue.cancel();\n          } catch (_unused) {}\n        }\n      }\n    }; // Check if the transport layer support cancellation\n\n\n    _this.isTransportCancelable = isCancelable(promiseOrValue);\n    Promise.resolve(promiseOrValue).then(resolve).catch(function (error) {\n      var _config$retry, _config$retryDelay;\n\n      // Stop if the fetch is already resolved\n      if (_this.isResolved) {\n        return;\n      } // Do we need to retry the request?\n\n\n      var retry = (_config$retry = config.retry) != null ? _config$retry : 3;\n      var retryDelay = (_config$retryDelay = config.retryDelay) != null ? _config$retryDelay : defaultRetryDelay;\n      var delay = typeof retryDelay === 'function' ? retryDelay(_this.failureCount, error) : retryDelay;\n      var shouldRetry = retry === true || typeof retry === 'number' && _this.failureCount < retry || typeof retry === 'function' && retry(_this.failureCount, error);\n\n      if (cancelRetry || !shouldRetry) {\n        // We are done if the query does not need to be retried\n        reject(error);\n        return;\n      }\n\n      _this.failureCount++; // Notify on fail\n\n      config.onFail == null ? void 0 : config.onFail(_this.failureCount, error); // Delay\n\n      sleep(delay) // Pause if the document is not visible or when the device is offline\n      .then(function () {\n        if (!focusManager.isFocused() || !onlineManager.isOnline()) {\n          return pause();\n        }\n      }).then(function () {\n        if (cancelRetry) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  }; // Start loop\n\n\n  run();\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getAbortController, functionalUpdate, isValidTimeout, noop, replaceEqualDeep, timeUntilStale, ensureQueryKeyArray } from './utils';\nimport { notifyManager } from './notifyManager';\nimport { getLogger } from './logger';\nimport { Retryer, isCancelledError } from './retryer'; // TYPES\n\n// CLASS\nexport var Query = /*#__PURE__*/function () {\n  function Query(config) {\n    this.abortSignalConsumed = false;\n    this.hadObservers = false;\n    this.defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.cache = config.cache;\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.initialState = config.state || this.getDefaultState(this.options);\n    this.state = this.initialState;\n    this.meta = config.meta;\n    this.scheduleGc();\n  }\n\n  var _proto = Query.prototype;\n\n  _proto.setOptions = function setOptions(options) {\n    var _this$options$cacheTi;\n\n    this.options = _extends({}, this.defaultOptions, options);\n    this.meta = options == null ? void 0 : options.meta; // Default to 5 minutes if not cache time is set\n\n    this.cacheTime = Math.max(this.cacheTime || 0, (_this$options$cacheTi = this.options.cacheTime) != null ? _this$options$cacheTi : 5 * 60 * 1000);\n  };\n\n  _proto.setDefaultOptions = function setDefaultOptions(options) {\n    this.defaultOptions = options;\n  };\n\n  _proto.scheduleGc = function scheduleGc() {\n    var _this = this;\n\n    this.clearGcTimeout();\n\n    if (isValidTimeout(this.cacheTime)) {\n      this.gcTimeout = setTimeout(function () {\n        _this.optionalRemove();\n      }, this.cacheTime);\n    }\n  };\n\n  _proto.clearGcTimeout = function clearGcTimeout() {\n    if (this.gcTimeout) {\n      clearTimeout(this.gcTimeout);\n      this.gcTimeout = undefined;\n    }\n  };\n\n  _proto.optionalRemove = function optionalRemove() {\n    if (!this.observers.length) {\n      if (this.state.isFetching) {\n        if (this.hadObservers) {\n          this.scheduleGc();\n        }\n      } else {\n        this.cache.remove(this);\n      }\n    }\n  };\n\n  _proto.setData = function setData(updater, options) {\n    var _this$options$isDataE, _this$options;\n\n    var prevData = this.state.data; // Get the new data\n\n    var data = functionalUpdate(updater, prevData); // Use prev data if an isDataEqual function is defined and returns `true`\n\n    if ((_this$options$isDataE = (_this$options = this.options).isDataEqual) == null ? void 0 : _this$options$isDataE.call(_this$options, prevData, data)) {\n      data = prevData;\n    } else if (this.options.structuralSharing !== false) {\n      // Structurally share data between prev and new data if needed\n      data = replaceEqualDeep(prevData, data);\n    } // Set data and mark it as cached\n\n\n    this.dispatch({\n      data: data,\n      type: 'success',\n      dataUpdatedAt: options == null ? void 0 : options.updatedAt\n    });\n    return data;\n  };\n\n  _proto.setState = function setState(state, setStateOptions) {\n    this.dispatch({\n      type: 'setState',\n      state: state,\n      setStateOptions: setStateOptions\n    });\n  };\n\n  _proto.cancel = function cancel(options) {\n    var _this$retryer;\n\n    var promise = this.promise;\n    (_this$retryer = this.retryer) == null ? void 0 : _this$retryer.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  };\n\n  _proto.destroy = function destroy() {\n    this.clearGcTimeout();\n    this.cancel({\n      silent: true\n    });\n  };\n\n  _proto.reset = function reset() {\n    this.destroy();\n    this.setState(this.initialState);\n  };\n\n  _proto.isActive = function isActive() {\n    return this.observers.some(function (observer) {\n      return observer.options.enabled !== false;\n    });\n  };\n\n  _proto.isFetching = function isFetching() {\n    return this.state.isFetching;\n  };\n\n  _proto.isStale = function isStale() {\n    return this.state.isInvalidated || !this.state.dataUpdatedAt || this.observers.some(function (observer) {\n      return observer.getCurrentResult().isStale;\n    });\n  };\n\n  _proto.isStaleByTime = function isStaleByTime(staleTime) {\n    if (staleTime === void 0) {\n      staleTime = 0;\n    }\n\n    return this.state.isInvalidated || !this.state.dataUpdatedAt || !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this$retryer2;\n\n    var observer = this.observers.find(function (x) {\n      return x.shouldFetchOnWindowFocus();\n    });\n\n    if (observer) {\n      observer.refetch();\n    } // Continue fetch if currently paused\n\n\n    (_this$retryer2 = this.retryer) == null ? void 0 : _this$retryer2.continue();\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this$retryer3;\n\n    var observer = this.observers.find(function (x) {\n      return x.shouldFetchOnReconnect();\n    });\n\n    if (observer) {\n      observer.refetch();\n    } // Continue fetch if currently paused\n\n\n    (_this$retryer3 = this.retryer) == null ? void 0 : _this$retryer3.continue();\n  };\n\n  _proto.addObserver = function addObserver(observer) {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer);\n      this.hadObservers = true; // Stop the query from being garbage collected\n\n      this.clearGcTimeout();\n      this.cache.notify({\n        type: 'observerAdded',\n        query: this,\n        observer: observer\n      });\n    }\n  };\n\n  _proto.removeObserver = function removeObserver(observer) {\n    if (this.observers.indexOf(observer) !== -1) {\n      this.observers = this.observers.filter(function (x) {\n        return x !== observer;\n      });\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.retryer) {\n          if (this.retryer.isTransportCancelable || this.abortSignalConsumed) {\n            this.retryer.cancel({\n              revert: true\n            });\n          } else {\n            this.retryer.cancelRetry();\n          }\n        }\n\n        if (this.cacheTime) {\n          this.scheduleGc();\n        } else {\n          this.cache.remove(this);\n        }\n      }\n\n      this.cache.notify({\n        type: 'observerRemoved',\n        query: this,\n        observer: observer\n      });\n    }\n  };\n\n  _proto.getObserversCount = function getObserversCount() {\n    return this.observers.length;\n  };\n\n  _proto.invalidate = function invalidate() {\n    if (!this.state.isInvalidated) {\n      this.dispatch({\n        type: 'invalidate'\n      });\n    }\n  };\n\n  _proto.fetch = function fetch(options, fetchOptions) {\n    var _this2 = this,\n        _this$options$behavio,\n        _context$fetchOptions,\n        _abortController$abor;\n\n    if (this.state.isFetching) {\n      if (this.state.dataUpdatedAt && (fetchOptions == null ? void 0 : fetchOptions.cancelRefetch)) {\n        // Silently cancel current fetch if the user wants to cancel refetches\n        this.cancel({\n          silent: true\n        });\n      } else if (this.promise) {\n        var _this$retryer4;\n\n        // make sure that retries that were potentially cancelled due to unmounts can continue\n        (_this$retryer4 = this.retryer) == null ? void 0 : _this$retryer4.continueRetry(); // Return current promise if we are already fetching\n\n        return this.promise;\n      }\n    } // Update config if passed, otherwise the config from the last execution is used\n\n\n    if (options) {\n      this.setOptions(options);\n    } // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n\n\n    if (!this.options.queryFn) {\n      var observer = this.observers.find(function (x) {\n        return x.options.queryFn;\n      });\n\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n\n    var queryKey = ensureQueryKeyArray(this.queryKey);\n    var abortController = getAbortController(); // Create query function context\n\n    var queryFnContext = {\n      queryKey: queryKey,\n      pageParam: undefined,\n      meta: this.meta\n    };\n    Object.defineProperty(queryFnContext, 'signal', {\n      enumerable: true,\n      get: function get() {\n        if (abortController) {\n          _this2.abortSignalConsumed = true;\n          return abortController.signal;\n        }\n\n        return undefined;\n      }\n    }); // Create fetch function\n\n    var fetchFn = function fetchFn() {\n      if (!_this2.options.queryFn) {\n        return Promise.reject('Missing queryFn');\n      }\n\n      _this2.abortSignalConsumed = false;\n      return _this2.options.queryFn(queryFnContext);\n    }; // Trigger behavior hook\n\n\n    var context = {\n      fetchOptions: fetchOptions,\n      options: this.options,\n      queryKey: queryKey,\n      state: this.state,\n      fetchFn: fetchFn,\n      meta: this.meta\n    };\n\n    if ((_this$options$behavio = this.options.behavior) == null ? void 0 : _this$options$behavio.onFetch) {\n      var _this$options$behavio2;\n\n      (_this$options$behavio2 = this.options.behavior) == null ? void 0 : _this$options$behavio2.onFetch(context);\n    } // Store state in case the current fetch needs to be reverted\n\n\n    this.revertState = this.state; // Set to fetching state if not already in it\n\n    if (!this.state.isFetching || this.state.fetchMeta !== ((_context$fetchOptions = context.fetchOptions) == null ? void 0 : _context$fetchOptions.meta)) {\n      var _context$fetchOptions2;\n\n      this.dispatch({\n        type: 'fetch',\n        meta: (_context$fetchOptions2 = context.fetchOptions) == null ? void 0 : _context$fetchOptions2.meta\n      });\n    } // Try to fetch the data\n\n\n    this.retryer = new Retryer({\n      fn: context.fetchFn,\n      abort: abortController == null ? void 0 : (_abortController$abor = abortController.abort) == null ? void 0 : _abortController$abor.bind(abortController),\n      onSuccess: function onSuccess(data) {\n        _this2.setData(data); // Notify cache callback\n\n\n        _this2.cache.config.onSuccess == null ? void 0 : _this2.cache.config.onSuccess(data, _this2); // Remove query after fetching if cache time is 0\n\n        if (_this2.cacheTime === 0) {\n          _this2.optionalRemove();\n        }\n      },\n      onError: function onError(error) {\n        // Optimistically update state if needed\n        if (!(isCancelledError(error) && error.silent)) {\n          _this2.dispatch({\n            type: 'error',\n            error: error\n          });\n        }\n\n        if (!isCancelledError(error)) {\n          // Notify cache callback\n          _this2.cache.config.onError == null ? void 0 : _this2.cache.config.onError(error, _this2); // Log error\n\n          getLogger().error(error);\n        } // Remove query after fetching if cache time is 0\n\n\n        if (_this2.cacheTime === 0) {\n          _this2.optionalRemove();\n        }\n      },\n      onFail: function onFail() {\n        _this2.dispatch({\n          type: 'failed'\n        });\n      },\n      onPause: function onPause() {\n        _this2.dispatch({\n          type: 'pause'\n        });\n      },\n      onContinue: function onContinue() {\n        _this2.dispatch({\n          type: 'continue'\n        });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay\n    });\n    this.promise = this.retryer.promise;\n    return this.promise;\n  };\n\n  _proto.dispatch = function dispatch(action) {\n    var _this3 = this;\n\n    this.state = this.reducer(this.state, action);\n    notifyManager.batch(function () {\n      _this3.observers.forEach(function (observer) {\n        observer.onQueryUpdate(action);\n      });\n\n      _this3.cache.notify({\n        query: _this3,\n        type: 'queryUpdated',\n        action: action\n      });\n    });\n  };\n\n  _proto.getDefaultState = function getDefaultState(options) {\n    var data = typeof options.initialData === 'function' ? options.initialData() : options.initialData;\n    var hasInitialData = typeof options.initialData !== 'undefined';\n    var initialDataUpdatedAt = hasInitialData ? typeof options.initialDataUpdatedAt === 'function' ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n    var hasData = typeof data !== 'undefined';\n    return {\n      data: data,\n      dataUpdateCount: 0,\n      dataUpdatedAt: hasData ? initialDataUpdatedAt != null ? initialDataUpdatedAt : Date.now() : 0,\n      error: null,\n      errorUpdateCount: 0,\n      errorUpdatedAt: 0,\n      fetchFailureCount: 0,\n      fetchMeta: null,\n      isFetching: false,\n      isInvalidated: false,\n      isPaused: false,\n      status: hasData ? 'success' : 'idle'\n    };\n  };\n\n  _proto.reducer = function reducer(state, action) {\n    var _action$meta, _action$dataUpdatedAt;\n\n    switch (action.type) {\n      case 'failed':\n        return _extends({}, state, {\n          fetchFailureCount: state.fetchFailureCount + 1\n        });\n\n      case 'pause':\n        return _extends({}, state, {\n          isPaused: true\n        });\n\n      case 'continue':\n        return _extends({}, state, {\n          isPaused: false\n        });\n\n      case 'fetch':\n        return _extends({}, state, {\n          fetchFailureCount: 0,\n          fetchMeta: (_action$meta = action.meta) != null ? _action$meta : null,\n          isFetching: true,\n          isPaused: false\n        }, !state.dataUpdatedAt && {\n          error: null,\n          status: 'loading'\n        });\n\n      case 'success':\n        return _extends({}, state, {\n          data: action.data,\n          dataUpdateCount: state.dataUpdateCount + 1,\n          dataUpdatedAt: (_action$dataUpdatedAt = action.dataUpdatedAt) != null ? _action$dataUpdatedAt : Date.now(),\n          error: null,\n          fetchFailureCount: 0,\n          isFetching: false,\n          isInvalidated: false,\n          isPaused: false,\n          status: 'success'\n        });\n\n      case 'error':\n        var error = action.error;\n\n        if (isCancelledError(error) && error.revert && this.revertState) {\n          return _extends({}, this.revertState);\n        }\n\n        return _extends({}, state, {\n          error: error,\n          errorUpdateCount: state.errorUpdateCount + 1,\n          errorUpdatedAt: Date.now(),\n          fetchFailureCount: state.fetchFailureCount + 1,\n          isFetching: false,\n          isPaused: false,\n          status: 'error'\n        });\n\n      case 'invalidate':\n        return _extends({}, state, {\n          isInvalidated: true\n        });\n\n      case 'setState':\n        return _extends({}, state, action.state);\n\n      default:\n        return state;\n    }\n  };\n\n  return Query;\n}();","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { hashQueryKeyByOptions, matchQuery, parseFilterArgs } from './utils';\nimport { Query } from './query';\nimport { notifyManager } from './notifyManager';\nimport { Subscribable } from './subscribable';\n// CLASS\nexport var QueryCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(QueryCache, _Subscribable);\n\n  function QueryCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.queries = [];\n    _this.queriesMap = {};\n    return _this;\n  }\n\n  var _proto = QueryCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var _options$queryHash;\n\n    var queryKey = options.queryKey;\n    var queryHash = (_options$queryHash = options.queryHash) != null ? _options$queryHash : hashQueryKeyByOptions(queryKey, options);\n    var query = this.get(queryHash);\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        options: client.defaultQueryOptions(options),\n        state: state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n        meta: options.meta\n      });\n      this.add(query);\n    }\n\n    return query;\n  };\n\n  _proto.add = function add(query) {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query;\n      this.queries.push(query);\n      this.notify({\n        type: 'queryAdded',\n        query: query\n      });\n    }\n  };\n\n  _proto.remove = function remove(query) {\n    var queryInMap = this.queriesMap[query.queryHash];\n\n    if (queryInMap) {\n      query.destroy();\n      this.queries = this.queries.filter(function (x) {\n        return x !== query;\n      });\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash];\n      }\n\n      this.notify({\n        type: 'queryRemoved',\n        query: query\n      });\n    }\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.queries.forEach(function (query) {\n        _this2.remove(query);\n      });\n    });\n  };\n\n  _proto.get = function get(queryHash) {\n    return this.queriesMap[queryHash];\n  };\n\n  _proto.getAll = function getAll() {\n    return this.queries;\n  };\n\n  _proto.find = function find(arg1, arg2) {\n    var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.queries.find(function (query) {\n      return matchQuery(filters, query);\n    });\n  };\n\n  _proto.findAll = function findAll(arg1, arg2) {\n    var _parseFilterArgs2 = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    return Object.keys(filters).length > 0 ? this.queries.filter(function (query) {\n      return matchQuery(filters, query);\n    }) : this.queries;\n  };\n\n  _proto.notify = function notify(event) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(event);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    var _this4 = this;\n\n    notifyManager.batch(function () {\n      _this4.queries.forEach(function (query) {\n        query.onFocus();\n      });\n    });\n  };\n\n  _proto.onOnline = function onOnline() {\n    var _this5 = this;\n\n    notifyManager.batch(function () {\n      _this5.queries.forEach(function (query) {\n        query.onOnline();\n      });\n    });\n  };\n\n  return QueryCache;\n}(Subscribable);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { getLogger } from './logger';\nimport { notifyManager } from './notifyManager';\nimport { Retryer } from './retryer';\nimport { noop } from './utils'; // TYPES\n\n// CLASS\nexport var Mutation = /*#__PURE__*/function () {\n  function Mutation(config) {\n    this.options = _extends({}, config.defaultOptions, config.options);\n    this.mutationId = config.mutationId;\n    this.mutationCache = config.mutationCache;\n    this.observers = [];\n    this.state = config.state || getDefaultState();\n    this.meta = config.meta;\n  }\n\n  var _proto = Mutation.prototype;\n\n  _proto.setState = function setState(state) {\n    this.dispatch({\n      type: 'setState',\n      state: state\n    });\n  };\n\n  _proto.addObserver = function addObserver(observer) {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer);\n    }\n  };\n\n  _proto.removeObserver = function removeObserver(observer) {\n    this.observers = this.observers.filter(function (x) {\n      return x !== observer;\n    });\n  };\n\n  _proto.cancel = function cancel() {\n    if (this.retryer) {\n      this.retryer.cancel();\n      return this.retryer.promise.then(noop).catch(noop);\n    }\n\n    return Promise.resolve();\n  };\n\n  _proto.continue = function _continue() {\n    if (this.retryer) {\n      this.retryer.continue();\n      return this.retryer.promise;\n    }\n\n    return this.execute();\n  };\n\n  _proto.execute = function execute() {\n    var _this = this;\n\n    var data;\n    var restored = this.state.status === 'loading';\n    var promise = Promise.resolve();\n\n    if (!restored) {\n      this.dispatch({\n        type: 'loading',\n        variables: this.options.variables\n      });\n      promise = promise.then(function () {\n        // Notify cache callback\n        _this.mutationCache.config.onMutate == null ? void 0 : _this.mutationCache.config.onMutate(_this.state.variables, _this);\n      }).then(function () {\n        return _this.options.onMutate == null ? void 0 : _this.options.onMutate(_this.state.variables);\n      }).then(function (context) {\n        if (context !== _this.state.context) {\n          _this.dispatch({\n            type: 'loading',\n            context: context,\n            variables: _this.state.variables\n          });\n        }\n      });\n    }\n\n    return promise.then(function () {\n      return _this.executeMutation();\n    }).then(function (result) {\n      data = result; // Notify cache callback\n\n      _this.mutationCache.config.onSuccess == null ? void 0 : _this.mutationCache.config.onSuccess(data, _this.state.variables, _this.state.context, _this);\n    }).then(function () {\n      return _this.options.onSuccess == null ? void 0 : _this.options.onSuccess(data, _this.state.variables, _this.state.context);\n    }).then(function () {\n      return _this.options.onSettled == null ? void 0 : _this.options.onSettled(data, null, _this.state.variables, _this.state.context);\n    }).then(function () {\n      _this.dispatch({\n        type: 'success',\n        data: data\n      });\n\n      return data;\n    }).catch(function (error) {\n      // Notify cache callback\n      _this.mutationCache.config.onError == null ? void 0 : _this.mutationCache.config.onError(error, _this.state.variables, _this.state.context, _this); // Log error\n\n      getLogger().error(error);\n      return Promise.resolve().then(function () {\n        return _this.options.onError == null ? void 0 : _this.options.onError(error, _this.state.variables, _this.state.context);\n      }).then(function () {\n        return _this.options.onSettled == null ? void 0 : _this.options.onSettled(undefined, error, _this.state.variables, _this.state.context);\n      }).then(function () {\n        _this.dispatch({\n          type: 'error',\n          error: error\n        });\n\n        throw error;\n      });\n    });\n  };\n\n  _proto.executeMutation = function executeMutation() {\n    var _this2 = this,\n        _this$options$retry;\n\n    this.retryer = new Retryer({\n      fn: function fn() {\n        if (!_this2.options.mutationFn) {\n          return Promise.reject('No mutationFn found');\n        }\n\n        return _this2.options.mutationFn(_this2.state.variables);\n      },\n      onFail: function onFail() {\n        _this2.dispatch({\n          type: 'failed'\n        });\n      },\n      onPause: function onPause() {\n        _this2.dispatch({\n          type: 'pause'\n        });\n      },\n      onContinue: function onContinue() {\n        _this2.dispatch({\n          type: 'continue'\n        });\n      },\n      retry: (_this$options$retry = this.options.retry) != null ? _this$options$retry : 0,\n      retryDelay: this.options.retryDelay\n    });\n    return this.retryer.promise;\n  };\n\n  _proto.dispatch = function dispatch(action) {\n    var _this3 = this;\n\n    this.state = reducer(this.state, action);\n    notifyManager.batch(function () {\n      _this3.observers.forEach(function (observer) {\n        observer.onMutationUpdate(action);\n      });\n\n      _this3.mutationCache.notify(_this3);\n    });\n  };\n\n  return Mutation;\n}();\nexport function getDefaultState() {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined\n  };\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'failed':\n      return _extends({}, state, {\n        failureCount: state.failureCount + 1\n      });\n\n    case 'pause':\n      return _extends({}, state, {\n        isPaused: true\n      });\n\n    case 'continue':\n      return _extends({}, state, {\n        isPaused: false\n      });\n\n    case 'loading':\n      return _extends({}, state, {\n        context: action.context,\n        data: undefined,\n        error: null,\n        isPaused: false,\n        status: 'loading',\n        variables: action.variables\n      });\n\n    case 'success':\n      return _extends({}, state, {\n        data: action.data,\n        error: null,\n        status: 'success',\n        isPaused: false\n      });\n\n    case 'error':\n      return _extends({}, state, {\n        data: undefined,\n        error: action.error,\n        failureCount: state.failureCount + 1,\n        isPaused: false,\n        status: 'error'\n      });\n\n    case 'setState':\n      return _extends({}, state, action.state);\n\n    default:\n      return state;\n  }\n}","import _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport { notifyManager } from './notifyManager';\nimport { Mutation } from './mutation';\nimport { matchMutation, noop } from './utils';\nimport { Subscribable } from './subscribable'; // TYPES\n\n// CLASS\nexport var MutationCache = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(MutationCache, _Subscribable);\n\n  function MutationCache(config) {\n    var _this;\n\n    _this = _Subscribable.call(this) || this;\n    _this.config = config || {};\n    _this.mutations = [];\n    _this.mutationId = 0;\n    return _this;\n  }\n\n  var _proto = MutationCache.prototype;\n\n  _proto.build = function build(client, options, state) {\n    var mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state: state,\n      defaultOptions: options.mutationKey ? client.getMutationDefaults(options.mutationKey) : undefined,\n      meta: options.meta\n    });\n    this.add(mutation);\n    return mutation;\n  };\n\n  _proto.add = function add(mutation) {\n    this.mutations.push(mutation);\n    this.notify(mutation);\n  };\n\n  _proto.remove = function remove(mutation) {\n    this.mutations = this.mutations.filter(function (x) {\n      return x !== mutation;\n    });\n    mutation.cancel();\n    this.notify(mutation);\n  };\n\n  _proto.clear = function clear() {\n    var _this2 = this;\n\n    notifyManager.batch(function () {\n      _this2.mutations.forEach(function (mutation) {\n        _this2.remove(mutation);\n      });\n    });\n  };\n\n  _proto.getAll = function getAll() {\n    return this.mutations;\n  };\n\n  _proto.find = function find(filters) {\n    if (typeof filters.exact === 'undefined') {\n      filters.exact = true;\n    }\n\n    return this.mutations.find(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.findAll = function findAll(filters) {\n    return this.mutations.filter(function (mutation) {\n      return matchMutation(filters, mutation);\n    });\n  };\n\n  _proto.notify = function notify(mutation) {\n    var _this3 = this;\n\n    notifyManager.batch(function () {\n      _this3.listeners.forEach(function (listener) {\n        listener(mutation);\n      });\n    });\n  };\n\n  _proto.onFocus = function onFocus() {\n    this.resumePausedMutations();\n  };\n\n  _proto.onOnline = function onOnline() {\n    this.resumePausedMutations();\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    var pausedMutations = this.mutations.filter(function (x) {\n      return x.state.isPaused;\n    });\n    return notifyManager.batch(function () {\n      return pausedMutations.reduce(function (promise, mutation) {\n        return promise.then(function () {\n          return mutation.continue().catch(noop);\n        });\n      }, Promise.resolve());\n    });\n  };\n\n  return MutationCache;\n}(Subscribable);","import { isCancelable } from './retryer';\nimport { getAbortController } from './utils';\nexport function infiniteQueryBehavior() {\n  return {\n    onFetch: function onFetch(context) {\n      context.fetchFn = function () {\n        var _context$fetchOptions, _context$fetchOptions2, _context$fetchOptions3, _context$fetchOptions4, _context$state$data, _context$state$data2;\n\n        var refetchPage = (_context$fetchOptions = context.fetchOptions) == null ? void 0 : (_context$fetchOptions2 = _context$fetchOptions.meta) == null ? void 0 : _context$fetchOptions2.refetchPage;\n        var fetchMore = (_context$fetchOptions3 = context.fetchOptions) == null ? void 0 : (_context$fetchOptions4 = _context$fetchOptions3.meta) == null ? void 0 : _context$fetchOptions4.fetchMore;\n        var pageParam = fetchMore == null ? void 0 : fetchMore.pageParam;\n        var isFetchingNextPage = (fetchMore == null ? void 0 : fetchMore.direction) === 'forward';\n        var isFetchingPreviousPage = (fetchMore == null ? void 0 : fetchMore.direction) === 'backward';\n        var oldPages = ((_context$state$data = context.state.data) == null ? void 0 : _context$state$data.pages) || [];\n        var oldPageParams = ((_context$state$data2 = context.state.data) == null ? void 0 : _context$state$data2.pageParams) || [];\n        var abortController = getAbortController();\n        var abortSignal = abortController == null ? void 0 : abortController.signal;\n        var newPageParams = oldPageParams;\n        var cancelled = false; // Get query function\n\n        var queryFn = context.options.queryFn || function () {\n          return Promise.reject('Missing queryFn');\n        };\n\n        var buildNewPages = function buildNewPages(pages, param, page, previous) {\n          newPageParams = previous ? [param].concat(newPageParams) : [].concat(newPageParams, [param]);\n          return previous ? [page].concat(pages) : [].concat(pages, [page]);\n        }; // Create function to fetch a page\n\n\n        var fetchPage = function fetchPage(pages, manual, param, previous) {\n          if (cancelled) {\n            return Promise.reject('Cancelled');\n          }\n\n          if (typeof param === 'undefined' && !manual && pages.length) {\n            return Promise.resolve(pages);\n          }\n\n          var queryFnContext = {\n            queryKey: context.queryKey,\n            signal: abortSignal,\n            pageParam: param,\n            meta: context.meta\n          };\n          var queryFnResult = queryFn(queryFnContext);\n          var promise = Promise.resolve(queryFnResult).then(function (page) {\n            return buildNewPages(pages, param, page, previous);\n          });\n\n          if (isCancelable(queryFnResult)) {\n            var promiseAsAny = promise;\n            promiseAsAny.cancel = queryFnResult.cancel;\n          }\n\n          return promise;\n        };\n\n        var promise; // Fetch first page?\n\n        if (!oldPages.length) {\n          promise = fetchPage([]);\n        } // Fetch next page?\n        else if (isFetchingNextPage) {\n            var manual = typeof pageParam !== 'undefined';\n            var param = manual ? pageParam : getNextPageParam(context.options, oldPages);\n            promise = fetchPage(oldPages, manual, param);\n          } // Fetch previous page?\n          else if (isFetchingPreviousPage) {\n              var _manual = typeof pageParam !== 'undefined';\n\n              var _param = _manual ? pageParam : getPreviousPageParam(context.options, oldPages);\n\n              promise = fetchPage(oldPages, _manual, _param, true);\n            } // Refetch pages\n            else {\n                (function () {\n                  newPageParams = [];\n                  var manual = typeof context.options.getNextPageParam === 'undefined';\n                  var shouldFetchFirstPage = refetchPage && oldPages[0] ? refetchPage(oldPages[0], 0, oldPages) : true; // Fetch first page\n\n                  promise = shouldFetchFirstPage ? fetchPage([], manual, oldPageParams[0]) : Promise.resolve(buildNewPages([], oldPageParams[0], oldPages[0])); // Fetch remaining pages\n\n                  var _loop = function _loop(i) {\n                    promise = promise.then(function (pages) {\n                      var shouldFetchNextPage = refetchPage && oldPages[i] ? refetchPage(oldPages[i], i, oldPages) : true;\n\n                      if (shouldFetchNextPage) {\n                        var _param2 = manual ? oldPageParams[i] : getNextPageParam(context.options, pages);\n\n                        return fetchPage(pages, manual, _param2);\n                      }\n\n                      return Promise.resolve(buildNewPages(pages, oldPageParams[i], oldPages[i]));\n                    });\n                  };\n\n                  for (var i = 1; i < oldPages.length; i++) {\n                    _loop(i);\n                  }\n                })();\n              }\n\n        var finalPromise = promise.then(function (pages) {\n          return {\n            pages: pages,\n            pageParams: newPageParams\n          };\n        });\n        var finalPromiseAsAny = finalPromise;\n\n        finalPromiseAsAny.cancel = function () {\n          cancelled = true;\n          abortController == null ? void 0 : abortController.abort();\n\n          if (isCancelable(promise)) {\n            promise.cancel();\n          }\n        };\n\n        return finalPromise;\n      };\n    }\n  };\n}\nexport function getNextPageParam(options, pages) {\n  return options.getNextPageParam == null ? void 0 : options.getNextPageParam(pages[pages.length - 1], pages);\n}\nexport function getPreviousPageParam(options, pages) {\n  return options.getPreviousPageParam == null ? void 0 : options.getPreviousPageParam(pages[0], pages);\n}\n/**\n * Checks if there is a next page.\n * Returns `undefined` if it cannot be determined.\n */\n\nexport function hasNextPage(options, pages) {\n  if (options.getNextPageParam && Array.isArray(pages)) {\n    var nextPageParam = getNextPageParam(options, pages);\n    return typeof nextPageParam !== 'undefined' && nextPageParam !== null && nextPageParam !== false;\n  }\n}\n/**\n * Checks if there is a previous page.\n * Returns `undefined` if it cannot be determined.\n */\n\nexport function hasPreviousPage(options, pages) {\n  if (options.getPreviousPageParam && Array.isArray(pages)) {\n    var previousPageParam = getPreviousPageParam(options, pages);\n    return typeof previousPageParam !== 'undefined' && previousPageParam !== null && previousPageParam !== false;\n  }\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { hashQueryKey, noop, parseFilterArgs, parseQueryArgs, partialMatchKey, hashQueryKeyByOptions } from './utils';\nimport { QueryCache } from './queryCache';\nimport { MutationCache } from './mutationCache';\nimport { focusManager } from './focusManager';\nimport { onlineManager } from './onlineManager';\nimport { notifyManager } from './notifyManager';\nimport { infiniteQueryBehavior } from './infiniteQueryBehavior';\n// CLASS\nexport var QueryClient = /*#__PURE__*/function () {\n  function QueryClient(config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    this.queryCache = config.queryCache || new QueryCache();\n    this.mutationCache = config.mutationCache || new MutationCache();\n    this.defaultOptions = config.defaultOptions || {};\n    this.queryDefaults = [];\n    this.mutationDefaults = [];\n  }\n\n  var _proto = QueryClient.prototype;\n\n  _proto.mount = function mount() {\n    var _this = this;\n\n    this.unsubscribeFocus = focusManager.subscribe(function () {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        _this.mutationCache.onFocus();\n\n        _this.queryCache.onFocus();\n      }\n    });\n    this.unsubscribeOnline = onlineManager.subscribe(function () {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        _this.mutationCache.onOnline();\n\n        _this.queryCache.onOnline();\n      }\n    });\n  };\n\n  _proto.unmount = function unmount() {\n    var _this$unsubscribeFocu, _this$unsubscribeOnli;\n\n    (_this$unsubscribeFocu = this.unsubscribeFocus) == null ? void 0 : _this$unsubscribeFocu.call(this);\n    (_this$unsubscribeOnli = this.unsubscribeOnline) == null ? void 0 : _this$unsubscribeOnli.call(this);\n  };\n\n  _proto.isFetching = function isFetching(arg1, arg2) {\n    var _parseFilterArgs = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs[0];\n\n    filters.fetching = true;\n    return this.queryCache.findAll(filters).length;\n  };\n\n  _proto.isMutating = function isMutating(filters) {\n    return this.mutationCache.findAll(_extends({}, filters, {\n      fetching: true\n    })).length;\n  };\n\n  _proto.getQueryData = function getQueryData(queryKey, filters) {\n    var _this$queryCache$find;\n\n    return (_this$queryCache$find = this.queryCache.find(queryKey, filters)) == null ? void 0 : _this$queryCache$find.state.data;\n  };\n\n  _proto.getQueriesData = function getQueriesData(queryKeyOrFilters) {\n    return this.getQueryCache().findAll(queryKeyOrFilters).map(function (_ref) {\n      var queryKey = _ref.queryKey,\n          state = _ref.state;\n      var data = state.data;\n      return [queryKey, data];\n    });\n  };\n\n  _proto.setQueryData = function setQueryData(queryKey, updater, options) {\n    var parsedOptions = parseQueryArgs(queryKey);\n    var defaultedOptions = this.defaultQueryOptions(parsedOptions);\n    return this.queryCache.build(this, defaultedOptions).setData(updater, options);\n  };\n\n  _proto.setQueriesData = function setQueriesData(queryKeyOrFilters, updater, options) {\n    var _this2 = this;\n\n    return notifyManager.batch(function () {\n      return _this2.getQueryCache().findAll(queryKeyOrFilters).map(function (_ref2) {\n        var queryKey = _ref2.queryKey;\n        return [queryKey, _this2.setQueryData(queryKey, updater, options)];\n      });\n    });\n  };\n\n  _proto.getQueryState = function getQueryState(queryKey, filters) {\n    var _this$queryCache$find2;\n\n    return (_this$queryCache$find2 = this.queryCache.find(queryKey, filters)) == null ? void 0 : _this$queryCache$find2.state;\n  };\n\n  _proto.removeQueries = function removeQueries(arg1, arg2) {\n    var _parseFilterArgs2 = parseFilterArgs(arg1, arg2),\n        filters = _parseFilterArgs2[0];\n\n    var queryCache = this.queryCache;\n    notifyManager.batch(function () {\n      queryCache.findAll(filters).forEach(function (query) {\n        queryCache.remove(query);\n      });\n    });\n  };\n\n  _proto.resetQueries = function resetQueries(arg1, arg2, arg3) {\n    var _this3 = this;\n\n    var _parseFilterArgs3 = parseFilterArgs(arg1, arg2, arg3),\n        filters = _parseFilterArgs3[0],\n        options = _parseFilterArgs3[1];\n\n    var queryCache = this.queryCache;\n\n    var refetchFilters = _extends({}, filters, {\n      active: true\n    });\n\n    return notifyManager.batch(function () {\n      queryCache.findAll(filters).forEach(function (query) {\n        query.reset();\n      });\n      return _this3.refetchQueries(refetchFilters, options);\n    });\n  };\n\n  _proto.cancelQueries = function cancelQueries(arg1, arg2, arg3) {\n    var _this4 = this;\n\n    var _parseFilterArgs4 = parseFilterArgs(arg1, arg2, arg3),\n        filters = _parseFilterArgs4[0],\n        _parseFilterArgs4$ = _parseFilterArgs4[1],\n        cancelOptions = _parseFilterArgs4$ === void 0 ? {} : _parseFilterArgs4$;\n\n    if (typeof cancelOptions.revert === 'undefined') {\n      cancelOptions.revert = true;\n    }\n\n    var promises = notifyManager.batch(function () {\n      return _this4.queryCache.findAll(filters).map(function (query) {\n        return query.cancel(cancelOptions);\n      });\n    });\n    return Promise.all(promises).then(noop).catch(noop);\n  };\n\n  _proto.invalidateQueries = function invalidateQueries(arg1, arg2, arg3) {\n    var _ref3,\n        _filters$refetchActiv,\n        _filters$refetchInact,\n        _this5 = this;\n\n    var _parseFilterArgs5 = parseFilterArgs(arg1, arg2, arg3),\n        filters = _parseFilterArgs5[0],\n        options = _parseFilterArgs5[1];\n\n    var refetchFilters = _extends({}, filters, {\n      // if filters.refetchActive is not provided and filters.active is explicitly false,\n      // e.g. invalidateQueries({ active: false }), we don't want to refetch active queries\n      active: (_ref3 = (_filters$refetchActiv = filters.refetchActive) != null ? _filters$refetchActiv : filters.active) != null ? _ref3 : true,\n      inactive: (_filters$refetchInact = filters.refetchInactive) != null ? _filters$refetchInact : false\n    });\n\n    return notifyManager.batch(function () {\n      _this5.queryCache.findAll(filters).forEach(function (query) {\n        query.invalidate();\n      });\n\n      return _this5.refetchQueries(refetchFilters, options);\n    });\n  };\n\n  _proto.refetchQueries = function refetchQueries(arg1, arg2, arg3) {\n    var _this6 = this;\n\n    var _parseFilterArgs6 = parseFilterArgs(arg1, arg2, arg3),\n        filters = _parseFilterArgs6[0],\n        options = _parseFilterArgs6[1];\n\n    var promises = notifyManager.batch(function () {\n      return _this6.queryCache.findAll(filters).map(function (query) {\n        return query.fetch(undefined, _extends({}, options, {\n          meta: {\n            refetchPage: filters == null ? void 0 : filters.refetchPage\n          }\n        }));\n      });\n    });\n    var promise = Promise.all(promises).then(noop);\n\n    if (!(options == null ? void 0 : options.throwOnError)) {\n      promise = promise.catch(noop);\n    }\n\n    return promise;\n  };\n\n  _proto.fetchQuery = function fetchQuery(arg1, arg2, arg3) {\n    var parsedOptions = parseQueryArgs(arg1, arg2, arg3);\n    var defaultedOptions = this.defaultQueryOptions(parsedOptions); // https://github.com/tannerlinsley/react-query/issues/652\n\n    if (typeof defaultedOptions.retry === 'undefined') {\n      defaultedOptions.retry = false;\n    }\n\n    var query = this.queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(defaultedOptions.staleTime) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  };\n\n  _proto.prefetchQuery = function prefetchQuery(arg1, arg2, arg3) {\n    return this.fetchQuery(arg1, arg2, arg3).then(noop).catch(noop);\n  };\n\n  _proto.fetchInfiniteQuery = function fetchInfiniteQuery(arg1, arg2, arg3) {\n    var parsedOptions = parseQueryArgs(arg1, arg2, arg3);\n    parsedOptions.behavior = infiniteQueryBehavior();\n    return this.fetchQuery(parsedOptions);\n  };\n\n  _proto.prefetchInfiniteQuery = function prefetchInfiniteQuery(arg1, arg2, arg3) {\n    return this.fetchInfiniteQuery(arg1, arg2, arg3).then(noop).catch(noop);\n  };\n\n  _proto.cancelMutations = function cancelMutations() {\n    var _this7 = this;\n\n    var promises = notifyManager.batch(function () {\n      return _this7.mutationCache.getAll().map(function (mutation) {\n        return mutation.cancel();\n      });\n    });\n    return Promise.all(promises).then(noop).catch(noop);\n  };\n\n  _proto.resumePausedMutations = function resumePausedMutations() {\n    return this.getMutationCache().resumePausedMutations();\n  };\n\n  _proto.executeMutation = function executeMutation(options) {\n    return this.mutationCache.build(this, options).execute();\n  };\n\n  _proto.getQueryCache = function getQueryCache() {\n    return this.queryCache;\n  };\n\n  _proto.getMutationCache = function getMutationCache() {\n    return this.mutationCache;\n  };\n\n  _proto.getDefaultOptions = function getDefaultOptions() {\n    return this.defaultOptions;\n  };\n\n  _proto.setDefaultOptions = function setDefaultOptions(options) {\n    this.defaultOptions = options;\n  };\n\n  _proto.setQueryDefaults = function setQueryDefaults(queryKey, options) {\n    var result = this.queryDefaults.find(function (x) {\n      return hashQueryKey(queryKey) === hashQueryKey(x.queryKey);\n    });\n\n    if (result) {\n      result.defaultOptions = options;\n    } else {\n      this.queryDefaults.push({\n        queryKey: queryKey,\n        defaultOptions: options\n      });\n    }\n  };\n\n  _proto.getQueryDefaults = function getQueryDefaults(queryKey) {\n    var _this$queryDefaults$f;\n\n    return queryKey ? (_this$queryDefaults$f = this.queryDefaults.find(function (x) {\n      return partialMatchKey(queryKey, x.queryKey);\n    })) == null ? void 0 : _this$queryDefaults$f.defaultOptions : undefined;\n  };\n\n  _proto.setMutationDefaults = function setMutationDefaults(mutationKey, options) {\n    var result = this.mutationDefaults.find(function (x) {\n      return hashQueryKey(mutationKey) === hashQueryKey(x.mutationKey);\n    });\n\n    if (result) {\n      result.defaultOptions = options;\n    } else {\n      this.mutationDefaults.push({\n        mutationKey: mutationKey,\n        defaultOptions: options\n      });\n    }\n  };\n\n  _proto.getMutationDefaults = function getMutationDefaults(mutationKey) {\n    var _this$mutationDefault;\n\n    return mutationKey ? (_this$mutationDefault = this.mutationDefaults.find(function (x) {\n      return partialMatchKey(mutationKey, x.mutationKey);\n    })) == null ? void 0 : _this$mutationDefault.defaultOptions : undefined;\n  };\n\n  _proto.defaultQueryOptions = function defaultQueryOptions(options) {\n    if (options == null ? void 0 : options._defaulted) {\n      return options;\n    }\n\n    var defaultedOptions = _extends({}, this.defaultOptions.queries, this.getQueryDefaults(options == null ? void 0 : options.queryKey), options, {\n      _defaulted: true\n    });\n\n    if (!defaultedOptions.queryHash && defaultedOptions.queryKey) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(defaultedOptions.queryKey, defaultedOptions);\n    }\n\n    return defaultedOptions;\n  };\n\n  _proto.defaultQueryObserverOptions = function defaultQueryObserverOptions(options) {\n    return this.defaultQueryOptions(options);\n  };\n\n  _proto.defaultMutationOptions = function defaultMutationOptions(options) {\n    if (options == null ? void 0 : options._defaulted) {\n      return options;\n    }\n\n    return _extends({}, this.defaultOptions.mutations, this.getMutationDefaults(options == null ? void 0 : options.mutationKey), options, {\n      _defaulted: true\n    });\n  };\n\n  _proto.clear = function clear() {\n    this.queryCache.clear();\n    this.mutationCache.clear();\n  };\n\n  return QueryClient;\n}();","// TYPES\n// FUNCTIONS\nvar logger = console;\nexport function getLogger() {\n  return logger;\n}\nexport function setLogger(newLogger) {\n  logger = newLogger;\n}","import { scheduleMicrotask } from './utils'; // TYPES\n\n// CLASS\nexport var NotifyManager = /*#__PURE__*/function () {\n  function NotifyManager() {\n    this.queue = [];\n    this.transactions = 0;\n\n    this.notifyFn = function (callback) {\n      callback();\n    };\n\n    this.batchNotifyFn = function (callback) {\n      callback();\n    };\n  }\n\n  var _proto = NotifyManager.prototype;\n\n  _proto.batch = function batch(callback) {\n    var result;\n    this.transactions++;\n\n    try {\n      result = callback();\n    } finally {\n      this.transactions--;\n\n      if (!this.transactions) {\n        this.flush();\n      }\n    }\n\n    return result;\n  };\n\n  _proto.schedule = function schedule(callback) {\n    var _this = this;\n\n    if (this.transactions) {\n      this.queue.push(callback);\n    } else {\n      scheduleMicrotask(function () {\n        _this.notifyFn(callback);\n      });\n    }\n  }\n  /**\n   * All calls to the wrapped function will be batched.\n   */\n  ;\n\n  _proto.batchCalls = function batchCalls(callback) {\n    var _this2 = this;\n\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this2.schedule(function () {\n        callback.apply(void 0, args);\n      });\n    };\n  };\n\n  _proto.flush = function flush() {\n    var _this3 = this;\n\n    var queue = this.queue;\n    this.queue = [];\n\n    if (queue.length) {\n      scheduleMicrotask(function () {\n        _this3.batchNotifyFn(function () {\n          queue.forEach(function (callback) {\n            _this3.notifyFn(callback);\n          });\n        });\n      });\n    }\n  }\n  /**\n   * Use this method to set a custom notify function.\n   * This can be used to for example wrap notifications with `React.act` while running tests.\n   */\n  ;\n\n  _proto.setNotifyFunction = function setNotifyFunction(fn) {\n    this.notifyFn = fn;\n  }\n  /**\n   * Use this method to set a custom function to batch notifications together into a single tick.\n   * By default React Query will use the batch function provided by ReactDOM or React Native.\n   */\n  ;\n\n  _proto.setBatchNotifyFunction = function setBatchNotifyFunction(fn) {\n    this.batchNotifyFn = fn;\n  };\n\n  return NotifyManager;\n}(); // SINGLETON\n\nexport var notifyManager = new NotifyManager();","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// TYPES\n// UTILS\nexport var isServer = typeof window === 'undefined';\nexport function noop() {\n  return undefined;\n}\nexport function functionalUpdate(updater, input) {\n  return typeof updater === 'function' ? updater(input) : updater;\n}\nexport function isValidTimeout(value) {\n  return typeof value === 'number' && value >= 0 && value !== Infinity;\n}\nexport function ensureQueryKeyArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\nexport function difference(array1, array2) {\n  return array1.filter(function (x) {\n    return array2.indexOf(x) === -1;\n  });\n}\nexport function replaceAt(array, index, value) {\n  var copy = array.slice(0);\n  copy[index] = value;\n  return copy;\n}\nexport function timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nexport function parseQueryArgs(arg1, arg2, arg3) {\n  if (!isQueryKey(arg1)) {\n    return arg1;\n  }\n\n  if (typeof arg2 === 'function') {\n    return _extends({}, arg3, {\n      queryKey: arg1,\n      queryFn: arg2\n    });\n  }\n\n  return _extends({}, arg2, {\n    queryKey: arg1\n  });\n}\nexport function parseMutationArgs(arg1, arg2, arg3) {\n  if (isQueryKey(arg1)) {\n    if (typeof arg2 === 'function') {\n      return _extends({}, arg3, {\n        mutationKey: arg1,\n        mutationFn: arg2\n      });\n    }\n\n    return _extends({}, arg2, {\n      mutationKey: arg1\n    });\n  }\n\n  if (typeof arg1 === 'function') {\n    return _extends({}, arg2, {\n      mutationFn: arg1\n    });\n  }\n\n  return _extends({}, arg1);\n}\nexport function parseFilterArgs(arg1, arg2, arg3) {\n  return isQueryKey(arg1) ? [_extends({}, arg2, {\n    queryKey: arg1\n  }), arg3] : [arg1 || {}, arg2];\n}\nexport function parseMutationFilterArgs(arg1, arg2) {\n  return isQueryKey(arg1) ? _extends({}, arg2, {\n    mutationKey: arg1\n  }) : arg1;\n}\nexport function mapQueryStatusFilter(active, inactive) {\n  if (active === true && inactive === true || active == null && inactive == null) {\n    return 'all';\n  } else if (active === false && inactive === false) {\n    return 'none';\n  } else {\n    // At this point, active|inactive can only be true|false or false|true\n    // so, when only one value is provided, the missing one has to be the negated value\n    var isActive = active != null ? active : !inactive;\n    return isActive ? 'active' : 'inactive';\n  }\n}\nexport function matchQuery(filters, query) {\n  var active = filters.active,\n      exact = filters.exact,\n      fetching = filters.fetching,\n      inactive = filters.inactive,\n      predicate = filters.predicate,\n      queryKey = filters.queryKey,\n      stale = filters.stale;\n\n  if (isQueryKey(queryKey)) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n\n  var queryStatusFilter = mapQueryStatusFilter(active, inactive);\n\n  if (queryStatusFilter === 'none') {\n    return false;\n  } else if (queryStatusFilter !== 'all') {\n    var isActive = query.isActive();\n\n    if (queryStatusFilter === 'active' && !isActive) {\n      return false;\n    }\n\n    if (queryStatusFilter === 'inactive' && isActive) {\n      return false;\n    }\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false;\n  }\n\n  if (typeof fetching === 'boolean' && query.isFetching() !== fetching) {\n    return false;\n  }\n\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n\n  return true;\n}\nexport function matchMutation(filters, mutation) {\n  var exact = filters.exact,\n      fetching = filters.fetching,\n      predicate = filters.predicate,\n      mutationKey = filters.mutationKey;\n\n  if (isQueryKey(mutationKey)) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n\n    if (exact) {\n      if (hashQueryKey(mutation.options.mutationKey) !== hashQueryKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n\n  if (typeof fetching === 'boolean' && mutation.state.status === 'loading' !== fetching) {\n    return false;\n  }\n\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n\n  return true;\n}\nexport function hashQueryKeyByOptions(queryKey, options) {\n  var hashFn = (options == null ? void 0 : options.queryKeyHashFn) || hashQueryKey;\n  return hashFn(queryKey);\n}\n/**\n * Default query keys hash function.\n */\n\nexport function hashQueryKey(queryKey) {\n  var asArray = ensureQueryKeyArray(queryKey);\n  return stableValueHash(asArray);\n}\n/**\n * Hashes the value into a stable hash.\n */\n\nexport function stableValueHash(value) {\n  return JSON.stringify(value, function (_, val) {\n    return isPlainObject(val) ? Object.keys(val).sort().reduce(function (result, key) {\n      result[key] = val[key];\n      return result;\n    }, {}) : val;\n  });\n}\n/**\n * Checks if key `b` partially matches with key `a`.\n */\n\nexport function partialMatchKey(a, b) {\n  return partialDeepEqual(ensureQueryKeyArray(a), ensureQueryKeyArray(b));\n}\n/**\n * Checks if `b` partially matches with `a`.\n */\n\nexport function partialDeepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return !Object.keys(b).some(function (key) {\n      return !partialDeepEqual(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\n\nexport function replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n\n  var array = Array.isArray(a) && Array.isArray(b);\n\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    var aSize = array ? a.length : Object.keys(a).length;\n    var bItems = array ? b : Object.keys(b);\n    var bSize = bItems.length;\n    var copy = array ? [] : {};\n    var equalItems = 0;\n\n    for (var i = 0; i < bSize; i++) {\n      var key = array ? i : bItems[i];\n      copy[key] = replaceEqualDeep(a[key], b[key]);\n\n      if (copy[key] === a[key]) {\n        equalItems++;\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n\n  return b;\n}\n/**\n * Shallow compare objects. Only works with objects that always have the same properties.\n */\n\nexport function shallowEqualObjects(a, b) {\n  if (a && !b || b && !a) {\n    return false;\n  }\n\n  for (var key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n} // Copied from: https://github.com/jonschlinkert/is-plain-object\n\nexport function isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  } // If has modified constructor\n\n\n  var ctor = o.constructor;\n\n  if (typeof ctor === 'undefined') {\n    return true;\n  } // If has modified prototype\n\n\n  var prot = ctor.prototype;\n\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  } // If constructor does not have an Object-specific method\n\n\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n}\n\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nexport function isQueryKey(value) {\n  return typeof value === 'string' || Array.isArray(value);\n}\nexport function isError(value) {\n  return value instanceof Error;\n}\nexport function sleep(timeout) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, timeout);\n  });\n}\n/**\n * Schedules a microtask.\n * This can be useful to schedule state updates after rendering.\n */\n\nexport function scheduleMicrotask(callback) {\n  Promise.resolve().then(callback).catch(function (error) {\n    return setTimeout(function () {\n      throw error;\n    });\n  });\n}\nexport function getAbortController() {\n  if (typeof AbortController === 'function') {\n    return new AbortController();\n  }\n}","import ReactDOM from 'react-dom';\nexport var unstable_batchedUpdates = ReactDOM.unstable_batchedUpdates;","import { notifyManager } from '../core';\nimport { unstable_batchedUpdates } from './reactBatchedUpdates';\nnotifyManager.setBatchNotifyFunction(unstable_batchedUpdates);","export var logger = console;","import { setLogger } from '../core';\nimport { logger } from './logger';\nsetLogger(logger);","import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { hashKey, shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  DefaultError,\n  MutateOptions,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>,\n) => void\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TContext = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  #client: QueryClient\n  #currentResult: MutationObserverResult<TData, TError, TVariables, TContext> =\n    undefined!\n  #currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  #mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    super()\n\n    this.#client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.#updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    const prevOptions = this.options as\n      | MutationObserverOptions<TData, TError, TVariables, TContext>\n      | undefined\n    this.options = this.#client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.#currentMutation,\n        observer: this,\n      })\n    }\n\n    if (\n      prevOptions?.mutationKey &&\n      this.options.mutationKey &&\n      hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)\n    ) {\n      this.reset()\n    } else if (this.#currentMutation?.state.status === 'pending') {\n      this.#currentMutation.setOptions(this.options)\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.#updateResult()\n\n    this.#notify(action)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.#currentResult\n  }\n\n  reset(): void {\n    // reset needs to remove the observer from the mutation because there is no way to \"get it back\"\n    // another mutate call will yield a new mutation!\n    this.#currentMutation?.removeObserver(this)\n    this.#currentMutation = undefined\n    this.#updateResult()\n    this.#notify()\n  }\n\n  mutate(\n    variables: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>,\n  ): Promise<TData> {\n    this.#mutateOptions = options\n\n    this.#currentMutation?.removeObserver(this)\n\n    this.#currentMutation = this.#client\n      .getMutationCache()\n      .build(this.#client, this.options)\n\n    this.#currentMutation.addObserver(this)\n\n    return this.#currentMutation.execute(variables)\n  }\n\n  #updateResult(): void {\n    const state =\n      this.#currentMutation?.state ??\n      getDefaultState<TData, TError, TVariables, TContext>()\n\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === 'pending',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    } as MutationObserverResult<TData, TError, TVariables, TContext>\n  }\n\n  #notify(action?: Action<TData, TError, TVariables, TContext>): void {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables!\n        const context = this.#currentResult.context\n\n        if (action?.type === 'success') {\n          this.#mutateOptions.onSuccess?.(action.data, variables, context!)\n          this.#mutateOptions.onSettled?.(action.data, null, variables, context)\n        } else if (action?.type === 'error') {\n          this.#mutateOptions.onError?.(action.error, variables, context)\n          this.#mutateOptions.onSettled?.(\n            undefined,\n            action.error,\n            variables,\n            context,\n          )\n        }\n      }\n\n      // Then trigger the listeners\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult)\n      })\n    })\n  }\n}\n","export function shouldThrowError<T extends (...args: Array<any>) => boolean>(\n  throwError: boolean | T | undefined,\n  params: Parameters<T>,\n): boolean {\n  // Allow throwError function to override throwing behavior on a per-error basis\n  if (typeof throwError === 'function') {\n    return throwError(...params)\n  }\n\n  return !!throwError\n}\n\nexport function noop(): void {}\n","'use client'\nimport * as React from 'react'\nimport { MutationObserver, notifyManager } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport { noop, shouldThrowError } from './utils'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport type { DefaultError, QueryClient } from '@tanstack/query-core'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TContext = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>,\n  queryClient?: QueryClient,\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const client = useQueryClient(queryClient)\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TContext>(\n        client,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.throwOnError, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n","function assertNonEmptyString (str) {\n  if (typeof str !== 'string' || !str) {\n    throw new Error('expected a non-empty string, got: ' + str)\n  }\n}\n\nfunction assertNumber (number) {\n  if (typeof number !== 'number') {\n    throw new Error('expected a number, got: ' + number)\n  }\n}\n\nconst DB_VERSION_CURRENT = 1;\nconst DB_VERSION_INITIAL = 1;\nconst STORE_EMOJI = 'emoji';\nconst STORE_KEYVALUE = 'keyvalue';\nconst STORE_FAVORITES = 'favorites';\nconst FIELD_TOKENS = 'tokens';\nconst INDEX_TOKENS = 'tokens';\nconst FIELD_UNICODE = 'unicode';\nconst INDEX_COUNT = 'count';\nconst FIELD_GROUP = 'group';\nconst FIELD_ORDER = 'order';\nconst INDEX_GROUP_AND_ORDER = 'group-order';\nconst KEY_ETAG = 'eTag';\nconst KEY_URL = 'url';\nconst KEY_PREFERRED_SKINTONE = 'skinTone';\nconst MODE_READONLY = 'readonly';\nconst MODE_READWRITE = 'readwrite';\nconst INDEX_SKIN_UNICODE = 'skinUnicodes';\nconst FIELD_SKIN_UNICODE = 'skinUnicodes';\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\nfunction uniqEmoji (emojis) {\n  return uniqBy(emojis, _ => _.unicode)\n}\n\nfunction initialMigration (db) {\n  function createObjectStore (name, keyPath, indexes) {\n    const store = keyPath\n      ? db.createObjectStore(name, { keyPath })\n      : db.createObjectStore(name);\n    if (indexes) {\n      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {\n        store.createIndex(indexName, keyPath, { multiEntry });\n      }\n    }\n    return store\n  }\n\n  createObjectStore(STORE_KEYVALUE);\n  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {\n    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],\n    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],\n    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]\n  });\n  createObjectStore(STORE_FAVORITES, undefined, {\n    [INDEX_COUNT]: ['']\n  });\n}\n\nconst openIndexedDBRequests = {};\nconst databaseCache = {};\nconst onCloseListeners = {};\n\nfunction handleOpenOrDeleteReq (resolve, reject, req) {\n  // These things are almost impossible to test with fakeIndexedDB sadly\n  /* istanbul ignore next */\n  req.onerror = () => reject(req.error);\n  /* istanbul ignore next */\n  req.onblocked = () => reject(new Error('IDB blocked'));\n  req.onsuccess = () => resolve(req.result);\n}\n\nasync function createDatabase (dbName) {\n  const db = await new Promise((resolve, reject) => {\n    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);\n    openIndexedDBRequests[dbName] = req;\n    req.onupgradeneeded = e => {\n      // Technically there is only one version, so we don't need this `if` check\n      // But if an old version of the JS is in another browser tab\n      // and it gets upgraded in the future and we have a new DB version, well...\n      // better safe than sorry.\n      /* istanbul ignore else */\n      if (e.oldVersion < DB_VERSION_INITIAL) {\n        initialMigration(req.result);\n      }\n    };\n    handleOpenOrDeleteReq(resolve, reject, req);\n  });\n  // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n  // No need for removeEventListener, because once the DB can no longer\n  // fire \"close\" events, it will auto-GC.\n  // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50\n  /* istanbul ignore next */\n  db.onclose = () => closeDatabase(dbName);\n  return db\n}\n\nfunction openDatabase (dbName) {\n  if (!databaseCache[dbName]) {\n    databaseCache[dbName] = createDatabase(dbName);\n  }\n  return databaseCache[dbName]\n}\n\nfunction dbPromise (db, storeName, readOnlyOrReadWrite, cb) {\n  return new Promise((resolve, reject) => {\n    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n    // are really irreplaceable data. IndexedDB is just a cache in this case.\n    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });\n    const store = typeof storeName === 'string'\n      ? txn.objectStore(storeName)\n      : storeName.map(name => txn.objectStore(name));\n    let res;\n    cb(store, txn, (result) => {\n      res = result;\n    });\n\n    txn.oncomplete = () => resolve(res);\n    /* istanbul ignore next */\n    txn.onerror = () => reject(txn.error);\n  })\n}\n\nfunction closeDatabase (dbName) {\n  // close any open requests\n  const req = openIndexedDBRequests[dbName];\n  const db = req && req.result;\n  if (db) {\n    db.close();\n    const listeners = onCloseListeners[dbName];\n    /* istanbul ignore else */\n    if (listeners) {\n      for (const listener of listeners) {\n        listener();\n      }\n    }\n  }\n  delete openIndexedDBRequests[dbName];\n  delete databaseCache[dbName];\n  delete onCloseListeners[dbName];\n}\n\nfunction deleteDatabase (dbName) {\n  return new Promise((resolve, reject) => {\n    // close any open requests\n    closeDatabase(dbName);\n    const req = indexedDB.deleteDatabase(dbName);\n    handleOpenOrDeleteReq(resolve, reject, req);\n  })\n}\n\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction addOnCloseListener (dbName, listener) {\n  let listeners = onCloseListeners[dbName];\n  if (!listeners) {\n    listeners = onCloseListeners[dbName] = [];\n  }\n  listeners.push(listener);\n}\n\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst irregularEmoticons = new Set([\n  ':D', 'XD', \":'D\", 'O:)',\n  ':X', ':P', ';P', 'XP',\n  ':L', ':Z', ':j', '8D',\n  'XO', '8)', ':B', ':O',\n  ':S', \":'o\", 'Dx', 'X(',\n  'D:', ':C', '>0)', ':3',\n  '</3', '<3', '\\\\M/', ':E',\n  '8#'\n]);\n\nfunction extractTokens (str) {\n  return str\n    .split(/[\\s_]+/)\n    .map(word => {\n      if (!word.match(/\\w/) || irregularEmoticons.has(word)) {\n        // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase()\n      }\n\n      return word\n        .replace(/[)(:,]/g, '')\n        .replace(//g, \"'\")\n        .toLowerCase()\n    }).filter(Boolean)\n}\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\n\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction normalizeTokens (str) {\n  return str\n    .filter(Boolean)\n    .map(_ => _.toLowerCase())\n    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)\n}\n\n// Transform emoji data for storage in IDB\nfunction transformEmojiData (emojiData) {\n  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {\n    const tokens = [...new Set(\n      normalizeTokens([\n        ...(shortcodes || []).map(extractTokens).flat(),\n        ...(tags || []).map(extractTokens).flat(),\n        ...extractTokens(annotation),\n        emoticon\n      ])\n    )].sort();\n    const res = {\n      annotation,\n      group,\n      order,\n      tags,\n      tokens,\n      unicode: emoji,\n      version\n    };\n    if (emoticon) {\n      res.emoticon = emoticon;\n    }\n    if (shortcodes) {\n      res.shortcodes = shortcodes;\n    }\n    if (skins) {\n      res.skinTones = [];\n      res.skinUnicodes = [];\n      res.skinVersions = [];\n      for (const { tone, emoji, version } of skins) {\n        res.skinTones.push(tone);\n        res.skinUnicodes.push(emoji);\n        res.skinVersions.push(version);\n      }\n    }\n    return res\n  });\n  return res\n}\n\n// helper functions that help compress the code better\n\nfunction callStore (store, method, key, cb) {\n  store[method](key).onsuccess = e => (cb && cb(e.target.result));\n}\n\nfunction getIDB (store, key, cb) {\n  callStore(store, 'get', key, cb);\n}\n\nfunction getAllIDB (store, key, cb) {\n  callStore(store, 'getAll', key, cb);\n}\n\nfunction commit (txn) {\n  /* istanbul ignore else */\n  if (txn.commit) {\n    txn.commit();\n  }\n}\n\n// like lodash's minBy\nfunction minBy (array, func) {\n  let minItem = array[0];\n  for (let i = 1; i < array.length; i++) {\n    const item = array[i];\n    if (func(minItem) > func(item)) {\n      minItem = item;\n    }\n  }\n  return minItem\n}\n\n// return an array of results representing all items that are found in each one of the arrays\n//\n\nfunction findCommonMembers (arrays, uniqByFunc) {\n  const shortestArray = minBy(arrays, _ => _.length);\n  const results = [];\n  for (const item of shortestArray) {\n    // if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {\n      results.push(item);\n    }\n  }\n  return results\n}\n\nasync function isEmpty (db) {\n  return !(await get(db, STORE_KEYVALUE, KEY_URL))\n}\n\nasync function hasData (db, url, eTag) {\n  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]\n    .map(key => get(db, STORE_KEYVALUE, key)));\n  return (oldETag === eTag && oldUrl === url)\n}\n\nasync function doFullDatabaseScanForSingleResult (db, predicate) {\n  // This batching algorithm is just a perf improvement over a basic\n  // cursor. The BATCH_SIZE is an estimate of what would give the best\n  // perf for doing a full DB scan (worst case).\n  //\n  // Mini-benchmark for determining the best batch size:\n  //\n  // PERF=1 pnpm build:rollup && pnpm test:adhoc\n  //\n  // (async () => {\n  //   performance.mark('start')\n  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n  //   performance.measure('total', 'start')\n  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n  // })()\n  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    let lastKey;\n\n    const processNextBatch = () => {\n      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {\n        const results = e.target.result;\n        for (const result of results) {\n          lastKey = result.unicode;\n          if (predicate(result)) {\n            return cb(result)\n          }\n        }\n        if (results.length < BATCH_SIZE) {\n          return cb()\n        }\n        processNextBatch();\n      };\n    };\n    processNextBatch();\n  })\n}\n\nasync function loadData (db, emojiData, url, eTag) {\n  try {\n    const transformedData = transformEmojiData(emojiData);\n    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {\n      let oldETag;\n      let oldUrl;\n      let todo = 0;\n\n      function checkFetched () {\n        if (++todo === 2) { // 2 requests made\n          onFetched();\n        }\n      }\n\n      function onFetched () {\n        if (oldETag === eTag && oldUrl === url) {\n          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n          return\n        }\n        // delete old data\n        emojiStore.clear();\n        // insert new data\n        for (const data of transformedData) {\n          emojiStore.put(data);\n        }\n        metaStore.put(eTag, KEY_ETAG);\n        metaStore.put(url, KEY_URL);\n        commit(txn);\n      }\n\n      getIDB(metaStore, KEY_ETAG, result => {\n        oldETag = result;\n        checkFetched();\n      });\n\n      getIDB(metaStore, KEY_URL, result => {\n        oldUrl = result;\n        checkFetched();\n      });\n    });\n  } finally {\n  }\n}\n\nasync function getEmojiByGroup (db, group) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);\n    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);\n  })\n}\n\nasync function getEmojiBySearchQuery (db, query) {\n  const tokens = normalizeTokens(extractTokens(query));\n\n  if (!tokens.length) {\n    return []\n  }\n\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    // get all results that contain all tokens (i.e. an AND query)\n    const intermediateResults = [];\n\n    const checkDone = () => {\n      if (intermediateResults.length === tokens.length) {\n        onDone();\n      }\n    };\n\n    const onDone = () => {\n      const results = findCommonMembers(intermediateResults, _ => _.unicode);\n      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));\n    };\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      const range = i === tokens.length - 1\n        ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\n        : IDBKeyRange.only(token); // treat all other tokens as an exact match\n      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {\n        intermediateResults.push(result);\n        checkDone();\n      });\n    }\n  })\n}\n\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function getEmojiByShortcode (db, shortcode) {\n  const emojis = await getEmojiBySearchQuery(db, shortcode);\n\n  // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n  // index on shortcodes.\n\n  if (!emojis.length) {\n    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));\n    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null\n  }\n\n  return emojis.filter(_ => {\n    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());\n    return lowerShortcodes.includes(shortcode.toLowerCase())\n  })[0] || null\n}\n\nasync function getEmojiByUnicode (db, unicode) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (\n    getIDB(emojiStore, unicode, result => {\n      if (result) {\n        return cb(result)\n      }\n      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));\n    })\n  ))\n}\n\nfunction get (db, storeName, key) {\n  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (\n    getIDB(store, key, cb)\n  ))\n}\n\nfunction set (db, storeName, key, value) {\n  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {\n    store.put(value, key);\n    commit(txn);\n  })\n}\n\nfunction incrementFavoriteEmojiCount (db, unicode) {\n  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (\n    getIDB(store, unicode, result => {\n      store.put((result || 0) + 1, unicode);\n      commit(txn);\n    })\n  ))\n}\n\nfunction getTopFavoriteEmoji (db, customEmojiIndex, limit) {\n  if (limit === 0) {\n    return []\n  }\n  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {\n    const results = [];\n    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {\n      const cursor = e.target.result;\n      if (!cursor) { // no more results\n        return cb(results)\n      }\n\n      function addResult (result) {\n        results.push(result);\n        if (results.length === limit) {\n          return cb(results) // done, reached the limit\n        }\n        cursor.continue();\n      }\n\n      const unicodeOrName = cursor.primaryKey;\n      const custom = customEmojiIndex.byName(unicodeOrName);\n      if (custom) {\n        return addResult(custom)\n      }\n      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n      // but my testing suggests it's not actually faster.\n      getIDB(emojiStore, unicodeOrName, emoji => {\n        if (emoji) {\n          return addResult(emoji)\n        }\n        // emoji not found somehow, ignore (may happen if custom emoji change)\n        cursor.continue();\n      });\n    };\n  })\n}\n\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\n\nconst CODA_MARKER = ''; // marks the end of the string\n\nfunction trie (arr, itemToTokens) {\n  const map = new Map();\n  for (const item of arr) {\n    const tokens = itemToTokens(item);\n    for (const token of tokens) {\n      let currentMap = map;\n      for (let i = 0; i < token.length; i++) {\n        const char = token.charAt(i);\n        let nextMap = currentMap.get(char);\n        if (!nextMap) {\n          nextMap = new Map();\n          currentMap.set(char, nextMap);\n        }\n        currentMap = nextMap;\n      }\n      let valuesAtCoda = currentMap.get(CODA_MARKER);\n      if (!valuesAtCoda) {\n        valuesAtCoda = [];\n        currentMap.set(CODA_MARKER, valuesAtCoda);\n      }\n      valuesAtCoda.push(item);\n    }\n  }\n\n  const search = (query, exact) => {\n    let currentMap = map;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charAt(i);\n      const nextMap = currentMap.get(char);\n      if (nextMap) {\n        currentMap = nextMap;\n      } else {\n        return []\n      }\n    }\n\n    if (exact) {\n      const results = currentMap.get(CODA_MARKER);\n      return results || []\n    }\n\n    const results = [];\n    // traverse\n    const queue = [currentMap];\n    while (queue.length) {\n      const currentMap = queue.shift();\n      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);\n      for (const [key, value] of entriesSortedByKey) {\n        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string\n          results.push(...value);\n        } else {\n          queue.push(value);\n        }\n      }\n    }\n    return results\n  };\n\n  return search\n}\n\nconst requiredKeys$1 = [\n  'name',\n  'url'\n];\n\nfunction assertCustomEmojis (customEmojis) {\n  const isArray = customEmojis && Array.isArray(customEmojis);\n  const firstItemIsFaulty = isArray &&\n    customEmojis.length &&\n    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));\n  if (!isArray || firstItemIsFaulty) {\n    throw new Error('Custom emojis are in the wrong format')\n  }\n}\n\nfunction customEmojiIndex (customEmojis) {\n  assertCustomEmojis(customEmojis);\n\n  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n\n  //\n  // all()\n  //\n  const all = customEmojis.sort(sortByName);\n\n  //\n  // search()\n  //\n  const emojiToTokens = emoji => {\n    const set = new Set();\n    if (emoji.shortcodes) {\n      for (const shortcode of emoji.shortcodes) {\n        for (const token of extractTokens(shortcode)) {\n          set.add(token);\n        }\n      }\n    }\n    return set\n  };\n  const searchTrie = trie(customEmojis, emojiToTokens);\n  const searchByExactMatch = _ => searchTrie(_, true);\n  const searchByPrefix = _ => searchTrie(_, false);\n\n  // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n  // is treated as a prefix search, but every other one is treated as an exact match.\n  // Then we AND the results together\n  const search = query => {\n    const tokens = extractTokens(query);\n    const intermediateResults = tokens.map((token, i) => (\n      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)\n    ));\n    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)\n  };\n\n  //\n  // byShortcode, byName\n  //\n  const shortcodeToEmoji = new Map();\n  const nameToEmoji = new Map();\n  for (const customEmoji of customEmojis) {\n    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n    for (const shortcode of (customEmoji.shortcodes || [])) {\n      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n  }\n\n  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());\n  const byName = name => nameToEmoji.get(name.toLowerCase());\n\n  return {\n    all,\n    search,\n    byShortcode,\n    byName\n  }\n}\n\nconst isFirefoxContentScript = typeof wrappedJSObject !== 'undefined';\n\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction cleanEmoji (emoji) {\n  if (!emoji) {\n    return emoji\n  }\n  // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\n  // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\n  /* istanbul ignore if */\n  if (isFirefoxContentScript) {\n    emoji = structuredClone(emoji);\n  }\n  delete emoji.tokens;\n  if (emoji.skinTones) {\n    const len = emoji.skinTones.length;\n    emoji.skins = Array(len);\n    for (let i = 0; i < len; i++) {\n      emoji.skins[i] = {\n        tone: emoji.skinTones[i],\n        unicode: emoji.skinUnicodes[i],\n        version: emoji.skinVersions[i]\n      };\n    }\n    delete emoji.skinTones;\n    delete emoji.skinUnicodes;\n    delete emoji.skinVersions;\n  }\n  return emoji\n}\n\nfunction warnETag (eTag) {\n  if (!eTag) {\n    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\n  }\n}\n\nconst requiredKeys = [\n  'annotation',\n  'emoji',\n  'group',\n  'order',\n  'version'\n];\n\nfunction assertEmojiData (emojiData) {\n  if (!emojiData ||\n    !Array.isArray(emojiData) ||\n    !emojiData[0] ||\n    (typeof emojiData[0] !== 'object') ||\n    requiredKeys.some(key => (!(key in emojiData[0])))) {\n    throw new Error('Emoji data is in the wrong format')\n  }\n}\n\nfunction assertStatus (response, dataSource) {\n  if (Math.floor(response.status / 100) !== 2) {\n    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)\n  }\n}\n\nasync function getETag (dataSource) {\n  const response = await fetch(dataSource, { method: 'HEAD' });\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  return eTag\n}\n\nasync function getETagAndData (dataSource) {\n  const response = await fetch(dataSource);\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  const emojiData = await response.json();\n  assertEmojiData(emojiData);\n  return [eTag, emojiData]\n}\n\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate \\_()_/\n/** @private */\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\n// generate a checksum based on the stringified JSON\nasync function jsonChecksum (object) {\n  const inString = JSON.stringify(object);\n  let inBuffer = binaryStringToArrayBuffer(inString);\n\n  // this does not need to be cryptographically secure, SHA-1 is fine\n  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\n  const outBinString = arrayBufferToBinaryString(outBuffer);\n  const res = btoa(outBinString);\n  return res\n}\n\nasync function checkForUpdates (db, dataSource) {\n  // just do a simple HEAD request first to see if the eTags match\n  let emojiData;\n  let eTag = await getETag(dataSource);\n  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers\n    const eTagAndData = await getETagAndData(dataSource);\n    eTag = eTagAndData[0];\n    emojiData = eTagAndData[1];\n    if (!eTag) {\n      eTag = await jsonChecksum(emojiData);\n    }\n  }\n  if (await hasData(db, dataSource, eTag)) ; else {\n    if (!emojiData) {\n      const eTagAndData = await getETagAndData(dataSource);\n      emojiData = eTagAndData[1];\n    }\n    await loadData(db, emojiData, dataSource, eTag);\n  }\n}\n\nasync function loadDataForFirstTime (db, dataSource) {\n  let [eTag, emojiData] = await getETagAndData(dataSource);\n  if (!eTag) {\n    // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await jsonChecksum(emojiData);\n  }\n\n  await loadData(db, emojiData, dataSource, eTag);\n}\n\nclass Database {\n  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {\n    this.dataSource = dataSource;\n    this.locale = locale;\n    this._dbName = `emoji-picker-element-${this.locale}`;\n    this._db = undefined;\n    this._lazyUpdate = undefined;\n    this._custom = customEmojiIndex(customEmoji);\n\n    this._clear = this._clear.bind(this);\n    this._ready = this._init();\n  }\n\n  async _init () {\n    const db = this._db = await openDatabase(this._dbName);\n\n    addOnCloseListener(this._dbName, this._clear);\n    const dataSource = this.dataSource;\n    const empty = await isEmpty(db);\n\n    if (empty) {\n      await loadDataForFirstTime(db, dataSource);\n    } else { // offline-first - do an update asynchronously\n      this._lazyUpdate = checkForUpdates(db, dataSource);\n    }\n  }\n\n  async ready () {\n    const checkReady = async () => {\n      if (!this._ready) {\n        this._ready = this._init();\n      }\n      return this._ready\n    };\n    await checkReady();\n    // There's a possibility of a race condition where the element gets added, removed, and then added again\n    // with a particular timing, which would set the _db to undefined.\n    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n    if (!this._db) {\n      await checkReady();\n    }\n  }\n\n  async getEmojiByGroup (group) {\n    assertNumber(group);\n    await this.ready();\n    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)\n  }\n\n  async getEmojiBySearchQuery (query) {\n    assertNonEmptyString(query);\n    await this.ready();\n    const customs = this._custom.search(query);\n    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);\n    return [\n      ...customs,\n      ...natives\n    ]\n  }\n\n  async getEmojiByShortcode (shortcode) {\n    assertNonEmptyString(shortcode);\n    await this.ready();\n    const custom = this._custom.byShortcode(shortcode);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))\n  }\n\n  async getEmojiByUnicodeOrName (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    const custom = this._custom.byName(unicodeOrName);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))\n  }\n\n  async getPreferredSkinTone () {\n    await this.ready();\n    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0\n  }\n\n  async setPreferredSkinTone (skinTone) {\n    assertNumber(skinTone);\n    await this.ready();\n    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)\n  }\n\n  async incrementFavoriteEmojiCount (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    return incrementFavoriteEmojiCount(this._db, unicodeOrName)\n  }\n\n  async getTopFavoriteEmoji (limit) {\n    assertNumber(limit);\n    await this.ready();\n    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)\n  }\n\n  set customEmoji (customEmojis) {\n    this._custom = customEmojiIndex(customEmojis);\n  }\n\n  get customEmoji () {\n    return this._custom.all\n  }\n\n  async _shutdown () {\n    await this.ready(); // reopen if we've already been closed/deleted\n    try {\n      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n    } catch (err) { /* ignore network errors (offline-first) */ }\n  }\n\n  // clear references to IDB, e.g. during a close event\n  _clear () {\n    // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n    // The memory leak tests prove this is unnecessary. It's because:\n    // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n    // 2) we clear the manual close listeners in databaseLifecycle.js.\n    this._db = this._ready = this._lazyUpdate = undefined;\n  }\n\n  async close () {\n    await this._shutdown();\n    await closeDatabase(this._dbName);\n  }\n\n  async delete () {\n    await this._shutdown();\n    await deleteDatabase(this._dbName);\n  }\n}\n\nexport { Database as default };\n","import Database from './database.js';\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [\n  [-1, '', 'custom'],\n  [0, '', 'smileys-emotion'],\n  [1, '', 'people-body'],\n  [3, '', 'animals-nature'],\n  [4, '', 'food-drink'],\n  [5, '', 'travel-places'],\n  [6, '', 'activities'],\n  [7, '', 'objects'],\n  [8, '', 'symbols'],\n  [9, '', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '': 16, // face with bags under eyes\n  '': 15.1, // shaking head, technically from v15 but see note above\n  '': 14,\n  '': 13.1, // smiling face with tear, technically from v13 but see note above\n  '': 12.1, // sari, technically from v12 but see note above\n  '': 11,\n  '': 5,\n  '': 4,\n  '': 3,\n  '': 2,\n  '': 1,\n  '': 0.7,\n  '': 0.6\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  ''\n];\n\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n// and https://www.npmjs.com/package/if-emoji for inspiration\n// This implementation is largely borrowed from if-emoji, adding the font-family\n\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n\n  const ctx = canvas.getContext('2d', {\n    // Improves the performance of `getImageData()`\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getContextAttributes#willreadfrequently\n    willReadFrequently: true\n  });\n  ctx.textBaseline = 'top';\n  ctx.font = `100px ${FONT_FAMILY}`;\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n\n  return ctx.getImageData(0, 0, 1, 1).data\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n// different emoji releases to determine what the font supports\n\nfunction determineEmojiSupportLevel () {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version\n      }\n    }\n  } catch (e) { // canvas error\n  } finally {\n  }\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1] // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nlet promise;\nconst detectEmojiSupportLevel = () => {\n  if (!promise) {\n    // Delay so it can run while the IDB database is being created by the browser (on another thread).\n    // This helps especially with first load  we want to start pre-populating the database on the main thread,\n    // and then wait for IDB to commit everything, and while waiting we run this check.\n    promise = new Promise(resolve => (\n      rIC(() => (\n        resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n      ))\n    ));\n  }\n  return promise\n};\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category, annotation }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    annotation,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins)\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// \"Svelte action\"-like utility to detect layout changes via ResizeObserver.\n// If ResizeObserver is unsupported, we just use rAF once and don't bother to update.\n\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction resizeObserverAction (node, abortSignal, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(onUpdate);\n    resizeObserver.observe(node);\n  } else { // just run once, don't bother trying to track it\n    rAF(onUpdate);\n  }\n\n  // cleanup function (called on destroy)\n  abortSignal.addEventListener('abort', () => {\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n    }\n  });\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  // skip running this in jest/vitest because we don't need to check for emoji support in that environment\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\n/**\n * Check if the given emojis containing ZWJ characters are supported by the current browser (don't render\n * as double characters) and return true if all are supported.\n * @param zwjEmojisToCheck\n * @param baselineEmoji\n * @param emojiToDomNode\n */\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  let allSupported = true;\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n\n    if (!supported) {\n      allSupported = false;\n    }\n  }\n  return allSupported\n}\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\n// At best the invalidation is useless, at worst it can cause infinite loops:\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\n// https://github.com/sveltejs/svelte/issues/6521\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\nfunction resetScrollTopIfPossible (element) {\n  /* istanbul ignore else */\n  if (element) { // Makes me nervous not to have this `if` guard\n    element.scrollTop = 0;\n  }\n}\n\nfunction getFromMap (cache, key, func) {\n  let cached = cache.get(key);\n  if (!cached) {\n    cached = func();\n    cache.set(key, cached);\n  }\n  return cached\n}\n\nfunction toString (value) {\n  return '' + value\n}\n\nfunction parseTemplate (htmlString) {\n  const template = document.createElement('template');\n  template.innerHTML = htmlString;\n  return template\n}\n\nconst parseCache = new WeakMap();\nconst domInstancesCache = new WeakMap();\n// This needs to be a symbol because it needs to be different from any possible output of a key function\nconst unkeyedSymbol = Symbol('un-keyed');\n\n// Not supported in Safari <=13\nconst hasReplaceChildren = 'replaceChildren' in Element.prototype;\nfunction replaceChildren (parentNode, newChildren) {\n  /* istanbul ignore else */\n  if (hasReplaceChildren) {\n    parentNode.replaceChildren(...newChildren);\n  } else { // minimal polyfill for Element.prototype.replaceChildren\n    parentNode.innerHTML = '';\n    parentNode.append(...newChildren);\n  }\n}\n\nfunction doChildrenNeedRerender (parentNode, newChildren) {\n  let oldChild = parentNode.firstChild;\n  let oldChildrenCount = 0;\n  // iterate using firstChild/nextSibling because browsers use a linked list under the hood\n  while (oldChild) {\n    const newChild = newChildren[oldChildrenCount];\n    // check if the old child and new child are the same\n    if (newChild !== oldChild) {\n      return true\n    }\n    oldChild = oldChild.nextSibling;\n    oldChildrenCount++;\n  }\n  // if new children length is different from old, we must re-render\n  return oldChildrenCount !== newChildren.length\n}\n\nfunction patchChildren (newChildren, instanceBinding) {\n  const { targetNode } = instanceBinding;\n  let { targetParentNode } = instanceBinding;\n\n  let needsRerender = false;\n\n  if (targetParentNode) { // already rendered once\n    needsRerender = doChildrenNeedRerender(targetParentNode, newChildren);\n  } else { // first render of list\n    needsRerender = true;\n    instanceBinding.targetNode = undefined; // placeholder node not needed anymore, free memory\n    instanceBinding.targetParentNode = targetParentNode = targetNode.parentNode;\n  }\n  // avoid re-rendering list if the dom nodes are exactly the same before and after\n  if (needsRerender) {\n    replaceChildren(targetParentNode, newChildren);\n  }\n}\n\nfunction patch (expressions, instanceBindings) {\n  for (const instanceBinding of instanceBindings) {\n    const {\n      targetNode,\n      currentExpression,\n      binding: {\n        expressionIndex,\n        attributeName,\n        attributeValuePre,\n        attributeValuePost\n      }\n    } = instanceBinding;\n\n    const expression = expressions[expressionIndex];\n\n    if (currentExpression === expression) {\n      // no need to update, same as before\n      continue\n    }\n\n    instanceBinding.currentExpression = expression;\n\n    if (attributeName) { // attribute replacement\n      targetNode.setAttribute(attributeName, attributeValuePre + toString(expression) + attributeValuePost);\n    } else { // text node / child element / children replacement\n      let newNode;\n      if (Array.isArray(expression)) { // array of DOM elements produced by tag template literals\n        patchChildren(expression, instanceBinding);\n      } else if (expression instanceof Element) { // html tag template returning a DOM element\n        newNode = expression;\n        targetNode.replaceWith(newNode);\n      } else { // primitive - string, number, etc\n        // nodeValue is faster than textContent supposedly https://www.youtube.com/watch?v=LY6y3HbDVmg\n        // note we may be replacing the value in a placeholder text node\n        targetNode.nodeValue = toString(expression);\n      }\n      if (newNode) {\n        instanceBinding.targetNode = newNode;\n      }\n    }\n  }\n}\n\nfunction parse (tokens) {\n  let htmlString = '';\n\n  let withinTag = false;\n  let withinAttribute = false;\n  let elementIndexCounter = -1; // depth-first traversal order\n\n  const elementsToBindings = new Map();\n  const elementIndexes = [];\n\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    const token = tokens[i];\n    htmlString += token;\n\n    if (i === len - 1) {\n      break // no need to process characters - no more expressions to be found\n    }\n\n    for (let j = 0; j < token.length; j++) {\n      const char = token.charAt(j);\n      switch (char) {\n        case '<': {\n          const nextChar = token.charAt(j + 1);\n          if (nextChar === '/') { // closing tag\n            // leaving an element\n            elementIndexes.pop();\n          } else { // not a closing tag\n            withinTag = true;\n            elementIndexes.push(++elementIndexCounter);\n          }\n          break\n        }\n        case '>': {\n          withinTag = false;\n          withinAttribute = false;\n          break\n        }\n        case '=': {\n          withinAttribute = true;\n          break\n        }\n      }\n    }\n\n    const elementIndex = elementIndexes[elementIndexes.length - 1];\n    const bindings = getFromMap(elementsToBindings, elementIndex, () => []);\n\n    let attributeName;\n    let attributeValuePre;\n    let attributeValuePost;\n    if (withinAttribute) {\n      // I never use single-quotes for attribute values in HTML, so just support double-quotes or no-quotes\n      const match = /(\\S+)=\"?([^\"=]*)$/.exec(token);\n      attributeName = match[1];\n      attributeValuePre = match[2];\n      attributeValuePost = /^[^\">]*/.exec(tokens[i + 1])[0];\n    }\n\n    const binding = {\n      attributeName,\n      attributeValuePre,\n      attributeValuePost,\n      expressionIndex: i\n    };\n\n    bindings.push(binding);\n\n    if (!withinTag && !withinAttribute) {\n      // Add a placeholder text node, so we can find it later. Note we only support one dynamic child text node\n      htmlString += ' ';\n    }\n  }\n\n  const template = parseTemplate(htmlString);\n\n  return {\n    template,\n    elementsToBindings\n  }\n}\n\nfunction applyBindings (bindings, element, instanceBindings) {\n  for (let i = 0; i < bindings.length; i++) {\n    const binding = bindings[i];\n\n    const targetNode = binding.attributeName\n      ? element // attribute binding, just use the element itself\n      : element.firstChild; // not an attribute binding, so has a placeholder text node\n\n    const instanceBinding = {\n      binding,\n      targetNode,\n      targetParentNode: undefined,\n      currentExpression: undefined\n    };\n\n    instanceBindings.push(instanceBinding);\n  }\n}\n\nfunction traverseAndSetupBindings (rootElement, elementsToBindings) {\n  const instanceBindings = [];\n\n  let topLevelBindings;\n  if (elementsToBindings.size === 1 && (topLevelBindings = elementsToBindings.get(0))) {\n    // Optimization for the common case where there's only one element and one binding\n    // Skip creating a TreeWalker entirely and just handle the root DOM element\n    applyBindings(topLevelBindings, rootElement, instanceBindings);\n  } else {\n    // traverse dom\n    const treeWalker = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT);\n\n    let element = rootElement;\n    let elementIndex = -1;\n    do {\n      const bindings = elementsToBindings.get(++elementIndex);\n      if (bindings) {\n        applyBindings(bindings, element, instanceBindings);\n      }\n    } while ((element = treeWalker.nextNode()))\n  }\n\n  return instanceBindings\n}\n\nfunction parseHtml (tokens) {\n  // All templates and bound expressions are unique per tokens array\n  const { template, elementsToBindings } = getFromMap(parseCache, tokens, () => parse(tokens));\n\n  // When we parseHtml, we always return a fresh DOM instance ready to be updated\n  const dom = template.cloneNode(true).content.firstElementChild;\n  const instanceBindings = traverseAndSetupBindings(dom, elementsToBindings);\n\n  return function updateDomInstance (expressions) {\n    patch(expressions, instanceBindings);\n    return dom\n  }\n}\n\nfunction createFramework (state) {\n  const domInstances = getFromMap(domInstancesCache, state, () => new Map());\n  let domInstanceCacheKey = unkeyedSymbol;\n\n  function html (tokens, ...expressions) {\n    // Each unique lexical usage of map() is considered unique due to the html`` tagged template call it makes,\n    // which has lexically unique tokens. The unkeyed symbol is just used for html`` usage outside of a map().\n    const domInstancesForTokens = getFromMap(domInstances, tokens, () => new Map());\n    const updateDomInstance = getFromMap(domInstancesForTokens, domInstanceCacheKey, () => parseHtml(tokens));\n\n    return updateDomInstance(expressions) // update with expressions\n  }\n\n  function map (array, callback, keyFunction) {\n    return array.map((item, index) => {\n      const originalCacheKey = domInstanceCacheKey;\n      domInstanceCacheKey = keyFunction(item);\n      try {\n        return callback(item, index)\n      } finally {\n        domInstanceCacheKey = originalCacheKey;\n      }\n    })\n  }\n\n  return { map, html }\n}\n\nfunction render (container, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender) {\n  const { labelWithSkin, titleForEmoji, unicodeWithSkin } = helpers;\n  const { html, map } = createFramework(state);\n\n  function emojiList (emojis, searchMode, prefix) {\n    return map(emojis, (emoji, i) => {\n      return html`<button role=\"${searchMode ? 'option' : 'menuitem'}\" aria-selected=\"${searchMode ? i === state.activeSearchItem : ''}\" aria-label=\"${labelWithSkin(emoji, state.currentSkinTone)}\" title=\"${titleForEmoji(emoji)}\" class=\"${\n                'emoji' +\n                (searchMode && i === state.activeSearchItem ? ' active' : '') +\n                (emoji.unicode ? '' : ' custom-emoji')\n              }\" id=\"${`${prefix}-${emoji.id}`}\" style=\"${emoji.unicode ? '' : `--custom-emoji-background: url(${JSON.stringify(emoji.url)})`}\">${\n        emoji.unicode\n          ? unicodeWithSkin(emoji, state.currentSkinTone)\n          : ''\n      }</button>`\n      // It's important for the cache key to be unique based on the prefix, because the framework caches based on the\n      // unique tokens + cache key, and the same emoji may be used in the tab as well as in the fav bar\n    }, emoji => `${prefix}-${emoji.id}`)\n  }\n\n  const section = () => {\n    return html`<section data-ref=\"rootElement\" class=\"picker\" aria-label=\"${state.i18n.regionLabel}\" style=\"${state.pickerStyle || ''}\"><div class=\"pad-top\"></div><div class=\"search-row\"><div class=\"search-wrapper\"><input id=\"search\" class=\"search\" type=\"search\" role=\"combobox\" enterkeyhint=\"search\" placeholder=\"${state.i18n.searchLabel}\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"true\" aria-expanded=\"${!!(state.searchMode && state.currentEmojis.length)}\" aria-controls=\"search-results\" aria-describedby=\"search-description\" aria-autocomplete=\"list\" aria-activedescendant=\"${state.activeSearchItemId ? `emo-${state.activeSearchItemId}` : ''}\" data-ref=\"searchElement\" data-on-input=\"onSearchInput\" data-on-keydown=\"onSearchKeydown\"><label class=\"sr-only\" for=\"search\">${state.i18n.searchLabel}</label> <span id=\"search-description\" class=\"sr-only\">${state.i18n.searchDescription}</span></div><div class=\"skintone-button-wrapper ${state.skinTonePickerExpandedAfterAnimation ? 'expanded' : ''}\"><button id=\"skintone-button\" class=\"emoji ${state.skinTonePickerExpanded ? 'hide-focus' : ''}\" aria-label=\"${state.skinToneButtonLabel}\" title=\"${state.skinToneButtonLabel}\" aria-describedby=\"skintone-description\" aria-haspopup=\"listbox\" aria-expanded=\"${state.skinTonePickerExpanded}\" aria-controls=\"skintone-list\" data-on-click=\"onClickSkinToneButton\">${state.skinToneButtonText || ''}</button></div><span id=\"skintone-description\" class=\"sr-only\">${state.i18n.skinToneDescription}</span><div data-ref=\"skinToneDropdown\" id=\"skintone-list\" class=\"skintone-list hide-focus ${state.skinTonePickerExpanded ? '' : 'hidden no-animate'}\" style=\"transform:translateY(${state.skinTonePickerExpanded ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))'})\" role=\"listbox\" aria-label=\"${state.i18n.skinTonesLabel}\" aria-activedescendant=\"skintone-${state.activeSkinTone}\" aria-hidden=\"${!state.skinTonePickerExpanded}\" tabIndex=\"-1\" data-on-focusout=\"onSkinToneOptionsFocusOut\" data-on-click=\"onSkinToneOptionsClick\" data-on-keydown=\"onSkinToneOptionsKeydown\" data-on-keyup=\"onSkinToneOptionsKeyup\">${\n    map(state.skinTones, (skinTone, i) => {\n    return html`<div id=\"skintone-${i}\" class=\"emoji ${i === state.activeSkinTone ? 'active' : ''}\" aria-selected=\"${i === state.activeSkinTone}\" role=\"option\" title=\"${state.i18n.skinTones[i]}\" aria-label=\"${state.i18n.skinTones[i]}\">${skinTone}</div>`\n    }, skinTone => skinTone)\n        }</div></div><div class=\"nav\" role=\"tablist\" style=\"grid-template-columns:repeat(${state.groups.length},1fr)\" aria-label=\"${state.i18n.categoriesLabel}\" data-on-keydown=\"onNavKeydown\" data-on-click=\"onNavClick\">${\n            map(state.groups, (group) => {\n              return html`<button role=\"tab\" class=\"nav-button\" aria-controls=\"tab-${group.id}\" aria-label=\"${state.i18n.categories[group.name]}\" aria-selected=\"${!state.searchMode && state.currentGroup.id === group.id}\" title=\"${state.i18n.categories[group.name]}\" data-group-id=\"${group.id}\"><div class=\"nav-emoji emoji\">${group.emoji}</div></button>`\n            }, group => group.id)\n          }</div><div class=\"indicator-wrapper\"><div class=\"indicator\" style=\"transform:translateX(${(/* istanbul ignore next */ (state.isRtl ? -1 : 1)) * state.currentGroupIndex * 100}%)\"></div></div><div class=\"message ${state.message ? '' : 'gone'}\" role=\"alert\" aria-live=\"polite\">${state.message || ''}</div><div data-ref=\"tabpanelElement\" class=\"tabpanel ${(!state.databaseLoaded || state.message) ? 'gone' : ''}\" role=\"${state.searchMode ? 'region' : 'tabpanel'}\" aria-label=\"${state.searchMode ? state.i18n.searchResultsLabel : state.i18n.categories[state.currentGroup.name]}\" id=\"${state.searchMode ? '' : `tab-${state.currentGroup.id}`}\" tabIndex=\"0\" data-on-click=\"onEmojiClick\"><div data-action=\"calculateEmojiGridStyle\">${\n              map(state.currentEmojisWithCategories, (emojiWithCategory, i) => {\n                return html`<div><div id=\"menu-label-${i}\" class=\"category ${state.currentEmojisWithCategories.length === 1 && state.currentEmojisWithCategories[0].category === '' ? 'gone' : ''}\" aria-hidden=\"true\">${\n                  state.searchMode\n                    ? state.i18n.searchResultsLabel\n                    : (\n                      emojiWithCategory.category\n                        ? emojiWithCategory.category\n                        : (\n                          state.currentEmojisWithCategories.length > 1\n                            ? state.i18n.categories.custom\n                            : state.i18n.categories[state.currentGroup.name]\n                        )\n                    )\n                }</div><div class=\"emoji-menu ${i !== 0 && !state.searchMode && state.currentGroup.id === -1 ? 'visibility-auto' : ''}\" style=\"${`--num-rows: ${Math.ceil(emojiWithCategory.emojis.length / state.numColumns)}`}\" data-action=\"updateOnIntersection\" role=\"${state.searchMode ? 'listbox' : 'menu'}\" aria-labelledby=\"menu-label-${i}\" id=\"${state.searchMode ? 'search-results' : ''}\">${\n              emojiList(emojiWithCategory.emojis, state.searchMode, /* prefix */ 'emo')\n            }</div></div>`\n              }, emojiWithCategory => emojiWithCategory.category)\n            }</div></div><div class=\"favorites onscreen emoji-menu ${state.message ? 'gone' : ''}\" role=\"menu\" aria-label=\"${state.i18n.favoritesLabel}\" data-on-click=\"onEmojiClick\">${\n            emojiList(state.currentFavorites, /* searchMode */ false, /* prefix */ 'fav')\n          }</div><button data-ref=\"baselineEmoji\" aria-hidden=\"true\" tabindex=\"-1\" class=\"abs-pos hidden emoji baseline-emoji\"></button></section>`\n  };\n\n  const rootDom = section();\n\n  // helper for traversing the dom, finding elements by an attribute, and getting the attribute value\n  const forElementWithAttribute = (attributeName, callback) => {\n    for (const element of container.querySelectorAll(`[${attributeName}]`)) {\n      callback(element, element.getAttribute(attributeName));\n    }\n  };\n\n  if (firstRender) { // not a re-render\n    container.appendChild(rootDom);\n\n    // we only bind events/refs once - there is no need to find them again given this component structure\n\n    // bind events\n    for (const eventName of ['click', 'focusout', 'input', 'keydown', 'keyup']) {\n      forElementWithAttribute(`data-on-${eventName}`, (element, listenerName) => {\n        element.addEventListener(eventName, events[listenerName]);\n      });\n    }\n\n    // find refs\n    forElementWithAttribute('data-ref', (element, ref) => {\n      refs[ref] = element;\n    });\n\n    // destroy/abort logic\n    abortSignal.addEventListener('abort', () => {\n      container.removeChild(rootDom);\n    });\n  }\n\n  // set up actions - these are re-bound on every render\n  forElementWithAttribute('data-action', (element, action) => {\n    let boundActions = actionContext.get(action);\n    if (!boundActions) {\n      actionContext.set(action, (boundActions = new WeakSet()));\n    }\n\n    // avoid applying the same action to the same element multiple times\n    if (!boundActions.has(element)) {\n      boundActions.add(element);\n      actions[action](element);\n    }\n  });\n}\n\n/* istanbul ignore next */\nconst qM = typeof queueMicrotask === 'function' ? queueMicrotask : callback => Promise.resolve().then(callback);\n\nfunction createState (abortSignal) {\n  let destroyed = false;\n  let currentObserver;\n\n  const propsToObservers = new Map();\n  const dirtyObservers = new Set();\n\n  let queued;\n\n  const flush = () => {\n    if (destroyed) {\n      return\n    }\n    const observersToRun = [...dirtyObservers];\n    dirtyObservers.clear(); // clear before running to force any new updates to run in another tick of the loop\n    try {\n      for (const observer of observersToRun) {\n        observer();\n      }\n    } finally {\n      queued = false;\n      if (dirtyObservers.size) { // new updates, queue another one\n        queued = true;\n        qM(flush);\n      }\n    }\n  };\n\n  const state = new Proxy({}, {\n    get (target, prop) {\n      if (currentObserver) {\n        let observers = propsToObservers.get(prop);\n        if (!observers) {\n          observers = new Set();\n          propsToObservers.set(prop, observers);\n        }\n        observers.add(currentObserver);\n      }\n      return target[prop]\n    },\n    set (target, prop, newValue) {\n      if (target[prop] !== newValue) {\n        target[prop] = newValue;\n        const observers = propsToObservers.get(prop);\n        if (observers) {\n          for (const observer of observers) {\n            dirtyObservers.add(observer);\n          }\n          if (!queued) {\n            queued = true;\n            qM(flush);\n          }\n        }\n      }\n      return true\n    }\n  });\n\n  const createEffect = (callback) => {\n    const runnable = () => {\n      const oldObserver = currentObserver;\n      currentObserver = runnable;\n      try {\n        return callback()\n      } finally {\n        currentObserver = oldObserver;\n      }\n    };\n    return runnable()\n  };\n\n  // destroy logic\n  abortSignal.addEventListener('abort', () => {\n    destroyed = true;\n  });\n\n  return {\n    state,\n    createEffect\n  }\n}\n\n// Compare two arrays, with a function called on each item in the two arrays that returns true if the items are equal\nfunction arraysAreEqualByFunction (left, right, areEqualFunc) {\n  if (left.length !== right.length) {\n    return false\n  }\n  for (let i = 0; i < left.length; i++) {\n    if (!areEqualFunc(left[i], right[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nconst intersectionObserverCache = new WeakMap();\n\nfunction intersectionObserverAction (node, abortSignal, listener) {\n  /* istanbul ignore else */\n  {\n    // The scroll root is always `.tabpanel`\n    const root = node.closest('.tabpanel');\n\n    let observer = intersectionObserverCache.get(root);\n    if (!observer) {\n      // TODO: replace this with the contentvisibilityautostatechange event when all supported browsers support it.\n      // For now we use IntersectionObserver because it has better cross-browser support, and it would be bad for\n      // old Safari versions if they eagerly downloaded all custom emoji all at once.\n      observer = new IntersectionObserver(listener, {\n        root,\n        // trigger if we are 1/2 scroll container height away so that the images load a bit quicker while scrolling\n        rootMargin: '50% 0px 50% 0px',\n        // trigger if any part of the emoji grid is intersecting\n        threshold: 0\n      });\n\n      // avoid creating a new IntersectionObserver for every category; just use one for the whole root\n      intersectionObserverCache.set(root, observer);\n\n      // assume that the abortSignal is always the same for this root node; just add one event listener\n      abortSignal.addEventListener('abort', () => {\n        observer.disconnect();\n      });\n    }\n\n    observer.observe(node);\n  }\n}\n\n/* eslint-disable prefer-const,no-labels,no-inner-declarations */\n\n// constants\nconst EMPTY_ARRAY = [];\n\nconst { assign } = Object;\n\nfunction createRoot (shadowRoot, props) {\n  const refs = {};\n  const abortController = new AbortController();\n  const abortSignal = abortController.signal;\n  const { state, createEffect } = createState(abortSignal);\n  const actionContext = new Map();\n\n  // initial state\n  assign(state, {\n    skinToneEmoji: undefined,\n    i18n: undefined,\n    database: undefined,\n    customEmoji: undefined,\n    customCategorySorting: undefined,\n    emojiVersion: undefined\n  });\n\n  // public props\n  assign(state, props);\n\n  // private props\n  assign(state, {\n    initialLoad: true,\n    currentEmojis: [],\n    currentEmojisWithCategories: [],\n    rawSearchText: '',\n    searchText: '',\n    searchMode: false,\n    activeSearchItem: -1,\n    message: undefined,\n    skinTonePickerExpanded: false,\n    skinTonePickerExpandedAfterAnimation: false,\n    currentSkinTone: 0,\n    activeSkinTone: 0,\n    skinToneButtonText: undefined,\n    pickerStyle: undefined,\n    skinToneButtonLabel: '',\n    skinTones: [],\n    currentFavorites: [],\n    defaultFavoriteEmojis: undefined,\n    numColumns: DEFAULT_NUM_COLUMNS,\n    isRtl: false,\n    currentGroupIndex: 0,\n    groups: groups,\n    databaseLoaded: false,\n    activeSearchItemId: undefined\n  });\n\n  //\n  // Update the current group based on the currentGroupIndex\n  //\n  createEffect(() => {\n    if (state.currentGroup !== state.groups[state.currentGroupIndex]) {\n      state.currentGroup = state.groups[state.currentGroupIndex];\n    }\n  });\n\n  //\n  // Utils/helpers\n  //\n\n  const focus = id => {\n    shadowRoot.getElementById(id).focus();\n  };\n\n  const emojiToDomNode = emoji => shadowRoot.getElementById(`emo-${emoji.id}`);\n\n  // fire a custom event that crosses the shadow boundary\n  const fireEvent = (name, detail) => {\n    refs.rootElement.dispatchEvent(new CustomEvent(name, {\n      detail,\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  //\n  // Comparison utils\n  //\n\n  const compareEmojiArrays = (a, b) => a.id === b.id;\n\n  const compareCurrentEmojisWithCategories = (a, b) => {\n    const { category: aCategory, emojis: aEmojis } = a;\n    const { category: bCategory, emojis: bEmojis } = b;\n\n    if (aCategory !== bCategory) {\n      return false\n    }\n\n    return arraysAreEqualByFunction(aEmojis, bEmojis, compareEmojiArrays)\n  };\n\n  //\n  // Update utils to avoid excessive re-renders\n  //\n\n  // avoid excessive re-renders by checking the value before setting\n  const updateCurrentEmojis = (newEmojis) => {\n    if (!arraysAreEqualByFunction(state.currentEmojis, newEmojis, compareEmojiArrays)) {\n      state.currentEmojis = newEmojis;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateSearchMode = (newSearchMode) => {\n    if (state.searchMode !== newSearchMode) {\n      state.searchMode = newSearchMode;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateCurrentEmojisWithCategories = (newEmojisWithCategories) => {\n    if (!arraysAreEqualByFunction(state.currentEmojisWithCategories, newEmojisWithCategories, compareCurrentEmojisWithCategories)) {\n      state.currentEmojisWithCategories = newEmojisWithCategories;\n    }\n  };\n\n  // Helpers used by PickerTemplate\n\n  const unicodeWithSkin = (emoji, currentSkinTone) => (\n    (currentSkinTone && emoji.skins && emoji.skins[currentSkinTone]) || emoji.unicode\n  );\n\n  const labelWithSkin = (emoji, currentSkinTone) => (\n    uniq([\n      (emoji.name || unicodeWithSkin(emoji, currentSkinTone)),\n      emoji.annotation,\n      ...(emoji.shortcodes || EMPTY_ARRAY)\n    ].filter(Boolean)).join(', ')\n  );\n\n  const titleForEmoji = (emoji) => (\n    emoji.annotation || (emoji.shortcodes || EMPTY_ARRAY).join(', ')\n  );\n\n  const helpers = {\n    labelWithSkin, titleForEmoji, unicodeWithSkin\n  };\n  const events = {\n    onClickSkinToneButton,\n    onEmojiClick,\n    onNavClick,\n    onNavKeydown,\n    onSearchKeydown,\n    onSkinToneOptionsClick,\n    onSkinToneOptionsFocusOut,\n    onSkinToneOptionsKeydown,\n    onSkinToneOptionsKeyup,\n    onSearchInput\n  };\n  const actions = {\n    calculateEmojiGridStyle,\n    updateOnIntersection\n  };\n\n  let firstRender = true;\n  createEffect(() => {\n    render(shadowRoot, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender);\n    firstRender = false;\n  });\n\n  //\n  // Determine the emoji support level (in requestIdleCallback)\n  //\n\n  // mount logic\n  if (!state.emojiVersion) {\n    detectEmojiSupportLevel().then(level => {\n      // Can't actually test emoji support in Jest/Vitest/JSDom, emoji never render in color in Cairo\n      /* istanbul ignore next */\n      if (!level) {\n        state.message = state.i18n.emojiUnsupportedMessage;\n      }\n    });\n  }\n\n  //\n  // Set or update the database object\n  //\n\n  createEffect(() => {\n    // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n    async function handleDatabaseLoading () {\n      let showingLoadingMessage = false;\n      const timeoutHandle = setTimeout(() => {\n        showingLoadingMessage = true;\n        state.message = state.i18n.loadingMessage;\n      }, TIMEOUT_BEFORE_LOADING_MESSAGE);\n      try {\n        await state.database.ready();\n        state.databaseLoaded = true; // eslint-disable-line no-unused-vars\n      } catch (err) {\n        console.error(err);\n        state.message = state.i18n.networkErrorMessage;\n      } finally {\n        clearTimeout(timeoutHandle);\n        if (showingLoadingMessage) { // Seems safer than checking the i18n string, which may change\n          showingLoadingMessage = false;\n          state.message = ''; // eslint-disable-line no-unused-vars\n        }\n      }\n    }\n\n    if (state.database) {\n      /* no await */\n      handleDatabaseLoading();\n    }\n  });\n\n  //\n  // Global styles for the entire picker\n  //\n\n  createEffect(() => {\n    state.pickerStyle = `\n      --num-groups: ${state.groups.length}; \n      --indicator-opacity: ${state.searchMode ? 0 : 1}; \n      --num-skintones: ${NUM_SKIN_TONES};`;\n  });\n\n  //\n  // Set or update the customEmoji\n  //\n\n  createEffect(() => {\n    if (state.customEmoji && state.database) {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n    }\n  });\n\n  createEffect(() => {\n    if (state.customEmoji && state.customEmoji.length) {\n      if (state.groups !== allGroups) { // don't update unnecessarily\n        state.groups = allGroups;\n      }\n    } else if (state.groups !== groups) {\n      if (state.currentGroupIndex) {\n        // If the current group is anything other than \"custom\" (which is first), decrement.\n        // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n        state.currentGroupIndex--;\n      }\n      state.groups = groups;\n    }\n  });\n\n  //\n  // Set or update the preferred skin tone\n  //\n\n  createEffect(() => {\n    async function updatePreferredSkinTone () {\n      if (state.databaseLoaded) {\n        state.currentSkinTone = await state.database.getPreferredSkinTone();\n      }\n    }\n\n    /* no await */ updatePreferredSkinTone();\n  });\n\n  createEffect(() => {\n    state.skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(state.skinToneEmoji, i));\n  });\n\n  createEffect(() => {\n    state.skinToneButtonText = state.skinTones[state.currentSkinTone];\n  });\n\n  createEffect(() => {\n    state.skinToneButtonLabel = state.i18n.skinToneLabel.replace('{skinTone}', state.i18n.skinTones[state.currentSkinTone]);\n  });\n\n  //\n  // Set or update the favorites emojis\n  //\n\n  createEffect(() => {\n    async function updateDefaultFavoriteEmojis () {\n      const { database } = state;\n      const favs = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => (\n        database.getEmojiByUnicodeOrName(unicode)\n      )))).filter(Boolean); // filter because in Jest/Vitest tests we don't have all the emoji in the DB\n      state.defaultFavoriteEmojis = favs;\n    }\n\n    if (state.databaseLoaded) {\n      /* no await */ updateDefaultFavoriteEmojis();\n    }\n  });\n\n  function updateCustomEmoji () {\n    // Certain effects have an implicit dependency on customEmoji since it affects the database\n    // Getting it here on the state ensures this effect re-runs when customEmoji change.\n    const { customEmoji, database } = state;\n    const databaseCustomEmoji = customEmoji || EMPTY_ARRAY;\n    if (database.customEmoji !== databaseCustomEmoji) {\n      // Avoid setting this if the customEmoji have _not_ changed, because the setter triggers a re-computation of the\n      // `customEmojiIndex`. Note we don't bother with deep object changes.\n      database.customEmoji = databaseCustomEmoji;\n    }\n  }\n\n  createEffect(() => {\n    async function updateFavorites () {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n      const { database, defaultFavoriteEmojis, numColumns } = state;\n      const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n      const favorites = await summarizeEmojis(uniqBy([\n        ...dbFavorites,\n        ...defaultFavoriteEmojis\n      ], _ => (_.unicode || _.name)).slice(0, numColumns));\n      state.currentFavorites = favorites;\n    }\n\n    if (state.databaseLoaded && state.defaultFavoriteEmojis) {\n      /* no await */ updateFavorites();\n    }\n  });\n\n  //\n  // Re-run whenever the emoji grid changes size, and re-calc style/layout-related state variables:\n  // 1) Re-calculate the --num-columns var because it may have changed\n  // 2) Re-calculate whether we're in RTL mode or not.\n  //\n  // The benefit of doing this in one place is to align with rAF/ResizeObserver\n  // and do all the calculations in one go. RTL vs LTR is not strictly layout-related,\n  // but since we're already reading the style here, and since it's already aligned with\n  // the rAF loop, this is the most appropriate place to do it perf-wise.\n  //\n\n  function calculateEmojiGridStyle (node) {\n    resizeObserverAction(node, abortSignal, () => {\n      /* istanbul ignore next */\n      { // jsdom throws errors for this kind of fancy stuff\n        // read all the style/layout calculations we need to make\n        const style = getComputedStyle(refs.rootElement);\n        const newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n        const newIsRtl = style.getPropertyValue('direction') === 'rtl';\n\n        // write to state variables\n        state.numColumns = newNumColumns;\n        state.isRtl = newIsRtl;\n      }\n    });\n  }\n\n  // Re-run whenever the custom emoji in a category are shown/hidden. This is an optimization that simulates\n  // what we'd get from `<img loading=lazy>` but without rendering an `<img>`.\n  function updateOnIntersection (node) {\n    intersectionObserverAction(node, abortSignal, (entries) => {\n      for (const { target, isIntersecting } of entries) {\n        target.classList.toggle('onscreen', isIntersecting);\n      }\n    });\n  }\n\n  //\n  // Set or update the currentEmojis. Check for invalid ZWJ renderings\n  // (i.e. double emoji).\n  //\n\n  createEffect(() => {\n    async function updateEmojis () {\n      const { searchText, currentGroup, databaseLoaded, customEmoji } = state;\n      if (!databaseLoaded) {\n        state.currentEmojis = [];\n        state.searchMode = false;\n      } else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n        const newEmojis = await getEmojisBySearchQuery(searchText);\n        if (state.searchText === searchText) { // if the situation changes asynchronously, do not update\n          updateCurrentEmojis(newEmojis);\n          updateSearchMode(true);\n        }\n      } else { // database is loaded and we're not in search mode, so we're in normal category mode\n        const { id: currentGroupId } = currentGroup;\n        // avoid race condition where currentGroupId is -1 and customEmoji is undefined/empty\n        if (currentGroupId !== -1 || (customEmoji && customEmoji.length)) {\n          const newEmojis = await getEmojisByGroup(currentGroupId);\n          if (state.currentGroup.id === currentGroupId) { // if the situation changes asynchronously, do not update\n            updateCurrentEmojis(newEmojis);\n            updateSearchMode(false);\n          }\n        }\n      }\n    }\n\n    /* no await */ updateEmojis();\n  });\n\n  const resetScrollTopInRaf = () => {\n    rAF(() => resetScrollTopIfPossible(refs.tabpanelElement));\n  };\n\n  // Some emojis have their ligatures rendered as two or more consecutive emojis\n  // We want to treat these the same as unsupported emojis, so we compare their\n  // widths against the baseline widths and remove them as necessary\n  createEffect(() => {\n    const { currentEmojis, emojiVersion } = state;\n    const zwjEmojisToCheck = currentEmojis\n      .filter(emoji => emoji.unicode) // filter custom emoji\n      .filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode));\n    if (!emojiVersion && zwjEmojisToCheck.length) {\n      // render now, check their length later\n      updateCurrentEmojis(currentEmojis);\n      rAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n    } else {\n      const newEmojis = emojiVersion ? currentEmojis : currentEmojis.filter(isZwjSupported);\n      updateCurrentEmojis(newEmojis);\n      // Reset scroll top to 0 when emojis change\n      resetScrollTopInRaf();\n    }\n  });\n\n  function checkZwjSupportAndUpdate (zwjEmojisToCheck) {\n    const allSupported = checkZwjSupport(zwjEmojisToCheck, refs.baselineEmoji, emojiToDomNode);\n    if (allSupported) {\n      // Even if all emoji are supported, we still need to reset the scroll top to 0 when emojis change\n      resetScrollTopInRaf();\n    } else {\n      // Force update. We only do this if there are any unsupported ZWJ characters since otherwise,\n      // for browsers that support all emoji, it would be an unnecessary extra re-render.\n      state.currentEmojis = [...state.currentEmojis];\n    }\n  }\n\n  function isZwjSupported (emoji) {\n    return !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode)\n  }\n\n  async function filterEmojisByVersion (emojis) {\n    const emojiSupportLevel = state.emojiVersion || await detectEmojiSupportLevel();\n    // !version corresponds to custom emoji\n    return emojis.filter(({ version }) => !version || version <= emojiSupportLevel)\n  }\n\n  async function summarizeEmojis (emojis) {\n    return summarizeEmojisForUI(emojis, state.emojiVersion || await detectEmojiSupportLevel())\n  }\n\n  async function getEmojisByGroup (group) {\n    // -1 is custom emoji\n    const emoji = group === -1 ? state.customEmoji : await state.database.getEmojiByGroup(group);\n    return summarizeEmojis(await filterEmojisByVersion(emoji))\n  }\n\n  async function getEmojisBySearchQuery (query) {\n    return summarizeEmojis(await filterEmojisByVersion(await state.database.getEmojiBySearchQuery(query)))\n  }\n\n  createEffect(() => {\n  });\n\n  //\n  // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n  // are no categories, because it's just easier to code the HTML this way.\n  //\n\n  createEffect(() => {\n    function calculateCurrentEmojisWithCategories () {\n      const { searchMode, currentEmojis } = state;\n      if (searchMode) {\n        return [\n          {\n            category: '',\n            emojis: currentEmojis\n          }\n        ]\n      }\n      const categoriesToEmoji = new Map();\n      for (const emoji of currentEmojis) {\n        const category = emoji.category || '';\n        let emojis = categoriesToEmoji.get(category);\n        if (!emojis) {\n          emojis = [];\n          categoriesToEmoji.set(category, emojis);\n        }\n        emojis.push(emoji);\n      }\n      return [...categoriesToEmoji.entries()]\n        .map(([category, emojis]) => ({ category, emojis }))\n        .sort((a, b) => state.customCategorySorting(a.category, b.category))\n    }\n\n    const newEmojisWithCategories = calculateCurrentEmojisWithCategories();\n    updateCurrentEmojisWithCategories(newEmojisWithCategories);\n  });\n\n  //\n  // Handle active search item (i.e. pressing up or down while searching)\n  //\n\n  createEffect(() => {\n    state.activeSearchItemId = state.activeSearchItem !== -1 && state.currentEmojis[state.activeSearchItem].id;\n  });\n\n  //\n  // Handle user input on the search input\n  //\n\n  createEffect(() => {\n    const { rawSearchText } = state;\n    rIC(() => {\n      state.searchText = (rawSearchText || '').trim(); // defer to avoid input delays, plus we can trim here\n      state.activeSearchItem = -1;\n    });\n  });\n\n  function onSearchKeydown (event) {\n    if (!state.searchMode || !state.currentEmojis.length) {\n      return\n    }\n\n    const goToNextOrPrevious = (previous) => {\n      halt(event);\n      state.activeSearchItem = incrementOrDecrement(previous, state.activeSearchItem, state.currentEmojis);\n    };\n\n    switch (event.key) {\n      case 'ArrowDown':\n        return goToNextOrPrevious(false)\n      case 'ArrowUp':\n        return goToNextOrPrevious(true)\n      case 'Enter':\n        if (state.activeSearchItem === -1) {\n          // focus the first option in the list since the list must be non-empty at this point (it's verified above)\n          state.activeSearchItem = 0;\n        } else { // there is already an active search item\n          halt(event);\n          return clickEmoji(state.currentEmojis[state.activeSearchItem].id)\n        }\n    }\n  }\n\n  //\n  // Handle user input on nav\n  //\n\n  function onNavClick (event) {\n    const { target } = event;\n    const closestTarget = target.closest('.nav-button');\n    /* istanbul ignore if */\n    if (!closestTarget) {\n      return // This should never happen, but makes me nervous not to have it\n    }\n    const groupId = parseInt(closestTarget.dataset.groupId, 10);\n    refs.searchElement.value = ''; // clear search box input\n    state.rawSearchText = '';\n    state.searchText = '';\n    state.activeSearchItem = -1;\n    state.currentGroupIndex = state.groups.findIndex(_ => _.id === groupId);\n  }\n\n  function onNavKeydown (event) {\n    const { target, key } = event;\n\n    const doFocus = el => {\n      if (el) {\n        halt(event);\n        el.focus();\n      }\n    };\n\n    switch (key) {\n      case 'ArrowLeft':\n        return doFocus(target.previousElementSibling)\n      case 'ArrowRight':\n        return doFocus(target.nextElementSibling)\n      case 'Home':\n        return doFocus(target.parentElement.firstElementChild)\n      case 'End':\n        return doFocus(target.parentElement.lastElementChild)\n    }\n  }\n\n  //\n  // Handle user input on an emoji\n  //\n\n  async function clickEmoji (unicodeOrName) {\n    const emoji = await state.database.getEmojiByUnicodeOrName(unicodeOrName);\n    const emojiSummary = [...state.currentEmojis, ...state.currentFavorites]\n      .find(_ => (_.id === unicodeOrName));\n    const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, state.currentSkinTone);\n    await state.database.incrementFavoriteEmojiCount(unicodeOrName);\n    fireEvent('emoji-click', {\n      emoji,\n      skinTone: state.currentSkinTone,\n      ...(skinTonedUnicode && { unicode: skinTonedUnicode }),\n      ...(emojiSummary.name && { name: emojiSummary.name })\n    });\n  }\n\n  async function onEmojiClick (event) {\n    const { target } = event;\n    /* istanbul ignore if */\n    if (!target.classList.contains('emoji')) {\n      // This should never happen, but makes me nervous not to have it\n      return\n    }\n    halt(event);\n    const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n    /* no await */ clickEmoji(id);\n  }\n\n  //\n  // Handle user input on the skintone picker\n  //\n\n  function changeSkinTone (skinTone) {\n    state.currentSkinTone = skinTone;\n    state.skinTonePickerExpanded = false;\n    focus('skintone-button');\n    fireEvent('skin-tone-change', { skinTone });\n    /* no await */ state.database.setPreferredSkinTone(skinTone);\n  }\n\n  function onSkinToneOptionsClick (event) {\n    const { target: { id } } = event;\n    const match = id && id.match(/^skintone-(\\d)/); // skintone option format\n    /* istanbul ignore if */\n    if (!match) { // not a skintone option\n      return // This should never happen, but makes me nervous not to have it\n    }\n    halt(event);\n    const skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\n    changeSkinTone(skinTone);\n  }\n\n  function onClickSkinToneButton (event) {\n    state.skinTonePickerExpanded = !state.skinTonePickerExpanded;\n    state.activeSkinTone = state.currentSkinTone;\n    // this should always be true, since the button is obscured by the listbox, so this `if` is just to be sure\n    if (state.skinTonePickerExpanded) {\n      halt(event);\n      rAF(() => focus('skintone-list'));\n    }\n  }\n\n  // To make the animation nicer, change the z-index of the skintone picker button\n  // *after* the animation has played. This makes it appear that the picker box\n  // is expanding \"below\" the button\n  createEffect(() => {\n    if (state.skinTonePickerExpanded) {\n      refs.skinToneDropdown.addEventListener('transitionend', () => {\n        state.skinTonePickerExpandedAfterAnimation = true; // eslint-disable-line no-unused-vars\n      }, { once: true });\n    } else {\n      state.skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n    }\n  });\n\n  function onSkinToneOptionsKeydown (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    const changeActiveSkinTone = async nextSkinTone => {\n      halt(event);\n      state.activeSkinTone = nextSkinTone;\n    };\n\n    switch (event.key) {\n      case 'ArrowUp':\n        return changeActiveSkinTone(incrementOrDecrement(true, state.activeSkinTone, state.skinTones))\n      case 'ArrowDown':\n        return changeActiveSkinTone(incrementOrDecrement(false, state.activeSkinTone, state.skinTones))\n      case 'Home':\n        return changeActiveSkinTone(0)\n      case 'End':\n        return changeActiveSkinTone(state.skinTones.length - 1)\n      case 'Enter':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n      case 'Escape':\n        halt(event);\n        state.skinTonePickerExpanded = false;\n        return focus('skintone-button')\n    }\n  }\n\n  function onSkinToneOptionsKeyup (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    switch (event.key) {\n      case ' ':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n    }\n  }\n\n  async function onSkinToneOptionsFocusOut (event) {\n    // On blur outside of the skintone listbox, collapse the skintone picker.\n    const { relatedTarget } = event;\n    // The `else` should never happen, but makes me nervous not to have it\n    /* istanbul ignore else */\n    if (!relatedTarget || relatedTarget.id !== 'skintone-list') {\n      state.skinTonePickerExpanded = false;\n    }\n  }\n\n  function onSearchInput (event) {\n    state.rawSearchText = event.target.value;\n  }\n\n  return {\n    $set (newState) {\n      assign(state, newState);\n    },\n    $destroy () {\n      abortController.abort();\n    }\n  }\n}\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\nvar baseStyles = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:\\\"\\\";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n\nconst PROPS = [\n  'customEmoji',\n  'customCategorySorting',\n  'database',\n  'dataSource',\n  'i18n',\n  'locale',\n  'skinToneEmoji',\n  'emojiVersion'\n];\n\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\nconst EXTRA_STYLES = `:host{--emoji-font-family:${FONT_FAMILY}}`;\n\nclass PickerElement extends HTMLElement {\n  constructor (props) {\n    super();\n    this.attachShadow({ mode: 'open' });\n    const style = document.createElement('style');\n    style.textContent = baseStyles + EXTRA_STYLES;\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      emojiVersion: null,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n\n  connectedCallback () {\n    // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\n    // do nothing (preserve the state)\n    if (!this._cmp) {\n      this._cmp = createRoot(this.shadowRoot, this._ctx);\n    }\n  }\n\n  disconnectedCallback () {\n    // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\n    // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\n    qM(() => {\n      // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\n      if (!this.isConnected && this._cmp) {\n        this._cmp.$destroy();\n        this._cmp = undefined;\n\n        const { database } = this._ctx;\n        database.close()\n          // only happens if the database failed to load in the first place, so we don't care\n          .catch(err => console.error(err));\n      }\n    });\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji', 'emoji-version'] // complex objects aren't supported, also use kebab-case\n  }\n\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    this._set(\n      // convert from kebab-case to camelcase\n      // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      // convert string attribute to float if necessary\n      attrName === 'emoji-version' ? parseFloat(newValue) : newValue\n    );\n  }\n\n  _set (prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({ [prop]: newValue });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n\n  _dbCreate () {\n    const { locale, dataSource, database } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({ locale, dataSource }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush () {\n    qM(() => (\n      this._dbCreate()\n    ));\n  }\n}\n\nconst definitions = {};\n\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get () {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop]\n    },\n    set (val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only')\n      }\n      this._set(prop, val);\n    }\n  };\n}\n\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\n\nexport { PickerElement as default };\n"],"names":["createSvgIcon","_jsx","d","getIconButtonUtilityClass","slot","generateUtilityClass","generateUtilityClasses","IconButtonRoot","styled","ButtonBase","name","overridesResolver","props","styles","ownerState","root","color","concat","capitalize","edge","size","memoTheme","_ref","theme","textAlign","flex","fontSize","typography","pxToRem","padding","borderRadius","vars","palette","action","active","transition","transitions","create","duration","shortest","variants","disableRipple","style","activeChannel","hoverOpacity","alpha","backgroundColor","marginLeft","marginRight","_ref2","Object","entries","filter","createSimplePaletteValueFilter","map","_ref3","main","_ref4","mainChannel","iconButtonClasses","disabled","React","inProps","ref","useDefaultProps","children","className","disableFocusRipple","other","classes","slots","composeClasses","useUtilityClasses","clsx","centerRipple","focusRipple","Subscribable","this","listeners","_proto","prototype","subscribe","listener","_this","callback","push","onSubscribe","x","onUnsubscribe","hasListeners","length","focusManager","_Subscribable","FocusManager","call","setup","onFocus","_window","isServer","window","addEventListener","removeEventListener","_inheritsLoose","cleanup","setEventListener","_this$cleanup","undefined","_this$cleanup2","_this2","focused","setFocused","forEach","isFocused","document","includes","visibilityState","onlineManager","OnlineManager","onOnline","online","setOnline","isOnline","navigator","onLine","defaultRetryDelay","failureCount","Math","min","pow","isCancelable","value","cancel","CancelledError","options","revert","silent","isCancelledError","Retryer","config","cancelFn","continueFn","promiseResolve","promiseReject","cancelRetry","abort","cancelOptions","continueRetry","continue","isPaused","isResolved","isTransportCancelable","promise","Promise","outerResolve","outerReject","resolve","onSuccess","reject","onError","run","promiseOrValue","fn","error","_unused","then","catch","_config$retry","_config$retryDelay","retry","retryDelay","delay","shouldRetry","onFail","sleep","continueResolve","onPause","onContinue","Query","abortSignalConsumed","hadObservers","defaultOptions","setOptions","observers","cache","queryKey","queryHash","initialState","state","getDefaultState","meta","scheduleGc","_this$options$cacheTi","_extends","cacheTime","max","setDefaultOptions","clearGcTimeout","isValidTimeout","gcTimeout","setTimeout","optionalRemove","clearTimeout","isFetching","remove","setData","updater","_this$options$isDataE","_this$options","prevData","data","functionalUpdate","isDataEqual","structuralSharing","replaceEqualDeep","dispatch","type","dataUpdatedAt","updatedAt","setState","setStateOptions","_this$retryer","retryer","noop","destroy","reset","isActive","some","observer","enabled","isStale","isInvalidated","getCurrentResult","isStaleByTime","staleTime","timeUntilStale","_this$retryer2","find","shouldFetchOnWindowFocus","refetch","_this$retryer3","shouldFetchOnReconnect","addObserver","indexOf","notify","query","removeObserver","getObserversCount","invalidate","fetch","fetchOptions","_this$options$behavio","_context$fetchOptions","_abortController$abor","cancelRefetch","_this$retryer4","queryFn","ensureQueryKeyArray","abortController","getAbortController","queryFnContext","pageParam","defineProperty","enumerable","get","signal","_this$options$behavio2","_context$fetchOptions2","context","fetchFn","behavior","onFetch","revertState","fetchMeta","bind","getLogger","_this3","reducer","notifyManager","batch","onQueryUpdate","initialData","initialDataUpdatedAt","hasData","dataUpdateCount","Date","now","errorUpdateCount","errorUpdatedAt","fetchFailureCount","status","_action$meta","_action$dataUpdatedAt","QueryCache","queries","queriesMap","build","client","_options$queryHash","hashQueryKeyByOptions","defaultQueryOptions","getQueryDefaults","add","queryInMap","clear","getAll","arg1","arg2","filters","parseFilterArgs","exact","matchQuery","findAll","keys","event","_this4","_this5","Mutation","mutationId","mutationCache","variables","execute","restored","onMutate","executeMutation","result","onSettled","_this$options$retry","mutationFn","onMutationUpdate","MutationCache","mutations","mutation","defaultMutationOptions","mutationKey","getMutationDefaults","matchMutation","resumePausedMutations","pausedMutations","reduce","getNextPageParam","pages","getPreviousPageParam","QueryClient","queryCache","queryDefaults","mutationDefaults","mount","unsubscribeFocus","unsubscribeOnline","unmount","_this$unsubscribeFocu","_this$unsubscribeOnli","fetching","isMutating","getQueryData","_this$queryCache$find","getQueriesData","queryKeyOrFilters","getQueryCache","setQueryData","parsedOptions","parseQueryArgs","defaultedOptions","setQueriesData","getQueryState","_this$queryCache$find2","removeQueries","resetQueries","arg3","_parseFilterArgs3","refetchFilters","refetchQueries","cancelQueries","_parseFilterArgs4","_parseFilterArgs4$","promises","all","invalidateQueries","_filters$refetchActiv","_filters$refetchInact","_parseFilterArgs5","refetchActive","inactive","refetchInactive","_this6","_parseFilterArgs6","refetchPage","throwOnError","fetchQuery","prefetchQuery","fetchInfiniteQuery","_context$fetchOptions3","_context$fetchOptions4","_context$state$data","_context$state$data2","fetchMore","isFetchingNextPage","direction","isFetchingPreviousPage","oldPages","oldPageParams","pageParams","abortSignal","newPageParams","cancelled","buildNewPages","param","page","previous","fetchPage","manual","queryFnResult","_manual","_param","shouldFetchFirstPage","_loop","i","_param2","finalPromise","prefetchInfiniteQuery","cancelMutations","_this7","getMutationCache","getDefaultOptions","setQueryDefaults","hashQueryKey","_this$queryDefaults$f","partialMatchKey","setMutationDefaults","_this$mutationDefault","_defaulted","defaultQueryObserverOptions","logger","console","setLogger","newLogger","NotifyManager","queue","transactions","notifyFn","batchNotifyFn","flush","schedule","scheduleMicrotask","batchCalls","_len","arguments","args","Array","_key","apply","setNotifyFunction","setBatchNotifyFunction","input","Infinity","isArray","isQueryKey","predicate","stale","queryStatusFilter","mapQueryStatusFilter","queryKeyHashFn","asArray","JSON","stringify","_","val","isPlainObject","sort","key","a","b","partialDeepEqual","array","aSize","bItems","bSize","copy","equalItems","o","hasObjectPrototype","ctor","constructor","prot","hasOwnProperty","toString","timeout","AbortController","unstable_batchedUpdates","ReactDOM","MutationObserver","_client","WeakMap","_currentResult","_currentMutation","_mutateOptions","_Class_brand","WeakSet","super","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_classPrivateFieldSet","bindMethods","_assertClassBrand","_updateResult","mutate","_classPrivateFieldGet2","prevOptions","_classPrivateFieldGet","shallowEqualObjects","hashKey","_classPrivateFieldGet3","_notify","_classPrivateFieldGet4","_classPrivateFieldGet5","_classPrivateFieldGet6","_classPrivateFieldGet7","isPending","isSuccess","isError","isIdle","_classPrivateFieldGet8","_classPrivateFieldGet9","_classPrivateFieldGet10","_classPrivateFieldGet11","_classPrivateFieldGet12","_classPrivateFieldGet13","_classPrivateFieldGet14","_classPrivateFieldGet15","useMutation","queryClient","useQueryClient","onStoreChange","mutateOptions","throwError","params","mutateAsync","assertNonEmptyString","str","Error","assertNumber","number","DB_VERSION_CURRENT","DB_VERSION_INITIAL","STORE_EMOJI","STORE_KEYVALUE","STORE_FAVORITES","FIELD_TOKENS","INDEX_TOKENS","FIELD_UNICODE","INDEX_COUNT","FIELD_GROUP","FIELD_ORDER","INDEX_GROUP_AND_ORDER","KEY_ETAG","KEY_URL","KEY_PREFERRED_SKINTONE","MODE_READONLY","MODE_READWRITE","INDEX_SKIN_UNICODE","FIELD_SKIN_UNICODE","DEFAULT_DATA_SOURCE","DEFAULT_LOCALE","uniqEmoji","emojis","arr","func","set","Set","res","item","has","uniqBy","unicode","openIndexedDBRequests","databaseCache","onCloseListeners","handleOpenOrDeleteReq","req","onerror","onblocked","onsuccess","async","createDatabase","dbName","db","indexedDB","open","onupgradeneeded","e","oldVersion","createObjectStore","keyPath","indexes","store","indexName","multiEntry","createIndex","initialMigration","onclose","closeDatabase","dbPromise","storeName","readOnlyOrReadWrite","cb","txn","transaction","durability","objectStore","oncomplete","close","irregularEmoticons","extractTokens","split","word","match","toLowerCase","replace","Boolean","MIN_SEARCH_TEXT_LENGTH","normalizeTokens","callStore","method","target","getIDB","getAllIDB","commit","findCommonMembers","arrays","uniqByFunc","shortestArray","minItem","minBy","results","findIndex","loadData","emojiData","url","eTag","transformedData","annotation","emoticon","group","order","shortcodes","skins","tags","emoji","version","tokens","flat","skinTones","skinUnicodes","skinVersions","tone","transformEmojiData","oldETag","oldUrl","emojiStore","metaStore","todo","checkFetched","put","onFetched","getEmojiBySearchQuery","intermediateResults","onDone","token","range","IDBKeyRange","bound","only","index","getEmojiByShortcode","shortcode","lastKey","processNextBatch","lowerBound","doFullDatabaseScanForSingleResult","lowerShortcodes","CODA_MARKER","requiredKeys$1","customEmojiIndex","customEmojis","firstItemIsFaulty","assertCustomEmojis","sortByName","searchTrie","itemToTokens","Map","currentMap","char","charAt","nextMap","valuesAtCoda","search","entriesSortedByKey","shift","trie","searchByExactMatch","searchByPrefix","shortcodeToEmoji","nameToEmoji","customEmoji","byShortcode","byName","isFirefoxContentScript","wrappedJSObject","cleanEmoji","structuredClone","len","warnETag","warn","requiredKeys","assertStatus","response","dataSource","floor","getETagAndData","headers","json","assertEmojiData","jsonChecksum","object","inBuffer","binary","buf","ArrayBuffer","Uint8Array","charCodeAt","binaryStringToArrayBuffer","outBinString","buffer","bytes","byteLength","String","fromCharCode","arrayBufferToBinaryString","crypto","subtle","digest","btoa","checkForUpdates","getETag","eTagAndData","Database","locale","_dbName","_db","_lazyUpdate","_custom","_clear","_ready","_init","addOnCloseListener","empty","isEmpty","loadDataForFirstTime","ready","checkReady","getEmojiByGroup","custom","getEmojiByUnicodeOrName","unicodeOrName","getEmojiByUnicode","getPreferredSkinTone","setPreferredSkinTone","skinTone","incrementFavoriteEmojiCount","getTopFavoriteEmoji","limit","favoritesStore","openCursor","cursor","addResult","primaryKey","_shutdown","err","delete","deleteDatabase","allGroups","id","groups","slice","rIC","requestIdleCallback","hasZwj","versionsAndTestEmoji","MOST_COMMONLY_USED_EMOJI","FONT_FAMILY","DEFAULT_CATEGORY_SORTING","getTextFeature","text","canvas","createElement","width","height","ctx","getContext","willReadFrequently","textBaseline","font","fillStyle","scale","fillText","getImageData","compareFeatures","feature1","feature2","feature1Str","join","startsWith","testColorEmojiSupported","detectEmojiSupportLevel","determineEmojiSupportLevel","supportedZwjEmojis","VARIATION_SELECTOR","SKINTONE_MODIFIER","ZWJ","LIGHT_SKIN_TONE","LIGHT_SKIN_TONE_MODIFIER","halt","preventDefault","stopPropagation","incrementOrDecrement","decrement","rAF","requestAnimationFrame","baselineEmojiWidth","resizeObserverSupported","ResizeObserver","calculateTextWidth","node","createRange","selectNode","firstChild","getBoundingClientRect","getFromMap","cached","parseCache","domInstancesCache","unkeyedSymbol","Symbol","hasReplaceChildren","Element","patchChildren","newChildren","instanceBinding","targetNode","targetParentNode","needsRerender","parentNode","oldChild","oldChildrenCount","nextSibling","doChildrenNeedRerender","replaceChildren","innerHTML","append","parse","htmlString","withinTag","withinAttribute","elementIndexCounter","elementsToBindings","elementIndexes","j","pop","bindings","attributeName","attributeValuePre","attributeValuePost","exec","binding","expressionIndex","template","parseTemplate","applyBindings","element","instanceBindings","currentExpression","parseHtml","dom","cloneNode","content","firstElementChild","rootElement","topLevelBindings","treeWalker","createTreeWalker","NodeFilter","SHOW_ELEMENT","elementIndex","nextNode","traverseAndSetupBindings","expressions","expression","setAttribute","newNode","replaceWith","nodeValue","patch","render","container","helpers","events","actions","refs","actionContext","firstRender","labelWithSkin","titleForEmoji","unicodeWithSkin","html","domInstances","domInstanceCacheKey","keyFunction","originalCacheKey","domInstancesForTokens","updateDomInstance","createFramework","emojiList","searchMode","prefix","_templateObject","_taggedTemplateLiteral","activeSearchItem","currentSkinTone","rootDom","_templateObject2","i18n","regionLabel","pickerStyle","searchLabel","currentEmojis","activeSearchItemId","searchDescription","skinTonePickerExpandedAfterAnimation","skinTonePickerExpanded","skinToneButtonLabel","skinToneButtonText","skinToneDescription","skinTonesLabel","activeSkinTone","_templateObject3","categoriesLabel","_templateObject4","categories","currentGroup","isRtl","currentGroupIndex","message","databaseLoaded","searchResultsLabel","currentEmojisWithCategories","emojiWithCategory","_templateObject5","category","ceil","numColumns","favoritesLabel","currentFavorites","forElementWithAttribute","querySelectorAll","getAttribute","appendChild","eventName","listenerName","removeChild","boundActions","qM","queueMicrotask","arraysAreEqualByFunction","left","right","areEqualFunc","intersectionObserverCache","EMPTY_ARRAY","assign","createRoot","shadowRoot","createEffect","currentObserver","destroyed","propsToObservers","dirtyObservers","queued","observersToRun","Proxy","prop","newValue","runnable","oldObserver","createState","skinToneEmoji","database","customCategorySorting","emojiVersion","initialLoad","rawSearchText","searchText","defaultFavoriteEmojis","focus","getElementById","emojiToDomNode","fireEvent","detail","dispatchEvent","CustomEvent","bubbles","composed","compareEmojiArrays","compareCurrentEmojisWithCategories","aCategory","aEmojis","bCategory","bEmojis","updateCurrentEmojis","newEmojis","updateSearchMode","newSearchMode","uniq","onClickSkinToneButton","onEmojiClick","classList","contains","clickEmoji","substring","onNavClick","closestTarget","closest","groupId","parseInt","dataset","searchElement","onNavKeydown","doFocus","el","previousElementSibling","nextElementSibling","parentElement","lastElementChild","onSearchKeydown","goToNextOrPrevious","onSkinToneOptionsClick","changeSkinTone","onSkinToneOptionsFocusOut","relatedTarget","onSkinToneOptionsKeydown","changeActiveSkinTone","nextSkinTone","onSkinToneOptionsKeyup","onSearchInput","calculateEmojiGridStyle","onUpdate","resizeObserver","observe","disconnect","resizeObserverAction","getComputedStyle","newNumColumns","getPropertyValue","newIsRtl","updateOnIntersection","IntersectionObserver","rootMargin","threshold","intersectionObserverAction","isIntersecting","toggle","updateCustomEmoji","databaseCustomEmoji","level","emojiUnsupportedMessage","showingLoadingMessage","timeoutHandle","loadingMessage","networkErrorMessage","handleDatabaseLoading","updatePreferredSkinTone","fill","zwjIndex","fromCodePoint","endsWith","applySkinTone","skinToneLabel","favs","updateDefaultFavoriteEmojis","dbFavorites","favorites","summarizeEmojis","updateFavorites","filterEmojisByVersion","getEmojisBySearchQuery","currentGroupId","getEmojisByGroup","updateEmojis","resetScrollTopInRaf","tabpanelElement","scrollTop","isZwjSupported","emojiSupportLevel","toSimpleSkinsMap","skin","summarizeEmojisForUI","emojiSummary","skinTonedUnicode","zwjEmojisToCheck","allSupported","baselineEmoji","emojiWidth","supported","checkZwjSupport","checkZwjSupportAndUpdate","newEmojisWithCategories","updateCurrentEmojisWithCategories","categoriesToEmoji","calculateCurrentEmojisWithCategories","trim","skinToneDropdown","once","$set","newState","$destroy","enI18n","activities","objects","symbols","flags","PROPS","EXTRA_STYLES","PickerElement","HTMLElement","attachShadow","mode","textContent","_ctx","_dbFlush","connectedCallback","_cmp","disconnectedCallback","isConnected","observedAttributes","attributeChangedCallback","attrName","oldValue","_set","up","toUpperCase","parseFloat","_dbCreate","definitions","defineProperties","customElements","define"],"sourceRoot":""}